{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5b85","webpack:///./src/App.vue?411a","webpack:///./src/components/Sidebar.vue?f9f7","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?7ef4","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/Information.vue?f9d8","webpack:///src/components/Information.vue","webpack:///./src/components/Information.vue?6735","webpack:///./src/components/Information.vue","webpack:///./src/components/DebugPanel.vue?fd24","webpack:///src/components/DebugPanel.vue","webpack:///./src/components/DebugPanel.vue?4920","webpack:///./src/components/DebugPanel.vue","webpack:///./src/compass/Variables.js","webpack:///./src/compass/PaintObj.js","webpack:///./src/compass/Coord.js","webpack:///./src/compass/Scene.js","webpack:///./src/compass/SensorPoint.js","webpack:///./src/compass/Craft.js","webpack:///./src/compass/Sphere.js","webpack:///./src/assets/SPVertexCode.vsh","webpack:///./src/assets/SPFragCode.fsh","webpack:///./src/compass/SpacePath.js","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","index","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_563f0be8_render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","id","cols","ref","width","height","staticClass","on","valueChanged","$event","debugValueChanged","staticRenderFns","Sidebarvue_type_template_id_0d1f5580_render","header","_v","_s","cameraTheta","toFixed","type","min","max","change","cameraThetaChanged","cameraPhi","cameraPhiChanged","cameraDis","cameraDisChanged","sphere","size","sphereRadiusChanged","label","model","callback","$$v","$set","expression","sphereAlpha","alpha","parseFloat","indicatorSize","setIndicatorSize","pathWidth","setPathWidth","Sidebarvue_type_template_id_0d1f5580_staticRenderFns","radToDeg","rad","Math","PI","Sidebarvue_type_script_lang_js_","camera","theta","phi","dis","drawMode","indicator","sensorPath","computed","methods","rotate","setSize","setScale","parse_float_default","init","spacePath","console","log","sensorPoint","mounted","components_Sidebarvue_type_script_lang_js_","component","componentNormalizer","Sidebar","Informationvue_type_template_id_7f9ab7d8_render","_m","Informationvue_type_template_id_7f9ab7d8_staticRenderFns","Informationvue_type_script_lang_js_","components_Informationvue_type_script_lang_js_","Information_component","Information","DebugPanelvue_type_template_id_7a4552b7_render","$emit","heading","pitch","roll","DebugPanelvue_type_template_id_7a4552b7_staticRenderFns","DebugPanelvue_type_script_lang_js_","components_DebugPanelvue_type_script_lang_js_","DebugPanel_component","DebugPanel","states","gl","attributes","uniforms","PaintObj","props","classCallCheck","undefined","sides","color","buffers","mMatrix","mat4","pvMatrix","mvpMatrix","quat","vscale","vec3","fromValues","translation","visible","_x","_y","_z","_rotateX","_rotateY","_rotateZ","drawtype","buffer","createBuffer","ELEMENT_ARRAY_BUFFER","itemSize","Float32Array","ARRAY_BUFFER","numItems","bindBuffer","bufferData","offset","bufferSubData","cylinderShape","radius","segment","bottom","circleShape","upper","vertex","concat","thetaStart","thetaEnd","pos","x","y","z","start","end","dtheta","cos","sin","rotateVertex","beta","v","set","rotateY","rotateZ","degToRad","deg","genVertices","normal","vertices","coordCarte","st","ct","sp","cp","Coord","_this","possibleConstructorReturn","getPrototypeOf","xcoord","xvertices","ycoord","yvertices","zcoord","zvertices","createArrayBuffer","STATIC_DRAW","Uint16Array","uniform1f","uniformMatrix4fv","m_matrix","pmv_matrix","vertexAttribPointer","vertex_position","FLOAT","vertex_normal","drawElements","TRIANGLES","UNSIGNED_SHORT","matrix","mul","Camera","defaultTheta","defaultPhi","defaultDis","defaultViewWidth","defaultViewHeight","up","lookat","pMatrix","vMatrix","lookAt","watcher","a_theta","a_phi","update","viewport","perspective","Scene","enable","DEPTH_TEST","depthFunc","LESS","CULL_FACE","cullFace","BACK","clearColor","clearDepth","pixelStorei","UNPACK_FLIP_Y_WEBGL","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","objs","light_direct","obj","first","unshift","recv","onViewChanged","running","scope","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","paint","requestAnimationFrame","codestr","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexCode","fragCode","shaderProgram","createProgram","vertexShader","getShader","VERTEX_SHADER","attachShader","fragShader","FRAGMENT_SHADER","_onShaderReady","linkProgram","useProgram","getAttribLocation","enableVertexAttribArray","texture","getUniformLocation","n_matrix","frag_color","has_texture","light_direction","specColor","vertexColor","uniform3fv","SensorPoint","inv_color","headingOffset","callbacks","cylinder","index_count","fromEuler","params","setTranslation","fromRotationTranslationScale","spherical","cb","u","setParam","SensorPath","_this2","MaxPathNum","all_index_count","cur_path_count","cur_index_count","cur_pi","buffer_path_bytes","buffer_index_bytes","gap","pg","angle","last_point","path","nangle","langle","presult","getLinearPoint","subBuffer","resetCurrentPath","lp","s1","s2","n0","cross","normalize","scale","that","pushVertex","seg","lpos","dist","updateBuffer","vec","args","deleteBuffer","DYNAMIC_DRAW","RecordPoint","_this3","max_vertex","vertex_count","point","Craft","url","readFile","text","mesh","ObjLoader","OBJ","Mesh","initMeshBuffers","uniform1i","vertexBuffer","normalBuffer","indexBuffer","fromScaling","rotateX","Sphere","MODE_SURFACE","MODE_LINE","MODE_LESSLINE","DEFAULT_RADIUS","vn","hn","line_alpha","res","getVertex","getIndex","vertex_index","lineIndexBuffer","line_index","lessLineIndexBuffer","less_line_index","lessLSIndexBuffer","less_ls_index","LINES","k","vertexIndex","lineIndex","lessLineIndex","lessLSIndex","RefCircle","circles","green","blue","ReferCircle","initSize","isCurrent","setQuat","current","a_beta","abs","originColor","LINE_LOOP","SPVertexCode","SPFragCode","SpacePath","createClass","canvas","context","getContext","depth","antilias","scene","initShaders","addCamera","coord","add","recordPoint","refCircle","addParamCallback","onSphericalChanged","render","reset","resetAllPath","craft","setRotation","pixelRatio","devicePixelRatio","currentWidth","currentHeight","pixelSize","Qt","Appvue_type_script_lang_js_","components","CSidebar","CInformation","CDebugPanel","created","spacepath","SpacePath_SpacePath","$refs","sidebar","event","src_Appvue_type_script_lang_js_","App_component","App","Vue","use","BootstrapVue","config","productionTip","h","$mount"],"mappings":"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","file":"js/index.055ef945.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\",\"id\":\"app\"}},[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('c-sidebar',{ref:\"sidebar\"})],1),_c('b-col',{attrs:{\"cols\":\"10\"}},[_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"800\",\"height\":\"600\"}}),_c('div',{staticClass:\"float-right\"},[_c('c-debug-panel',{on:{\"valueChanged\":function($event){return _vm.debugValueChanged($event)}}}),_c('c-information')],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-card',{attrs:{\"header\":\"相机设置\"}},[_c('div',[_vm._v(\"摄像机θ角(与Z轴正半轴夹角): \"+_vm._s(_vm.cameraTheta.toFixed(1))+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraTheta\",\"value\":_vm.cameraTheta,\"min\":\"0\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.cameraThetaChanged($event)}}})],1),_c('div',[_vm._v(\"摄像机φ角(与X轴正半轴夹角): \"+_vm._s(_vm.cameraPhi.toFixed(1))+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraPhi\",\"value\":_vm.cameraPhi,\"min\":\"0\",\"max\":\"360\"},on:{\"change\":function($event){return _vm.cameraPhiChanged($event)}}})],1),_c('div',[_vm._v(\"摄像机距原点: \"+_vm._s(_vm.cameraDis)+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"cameraDis\",\"value\":_vm.cameraDis,\"min\":\"1\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.cameraDisChanged($event)}}})],1)]),_c('b-card',{attrs:{\"header\":\"球体参数设置\"}},[_c('div',[_vm._v(\"参考球半径: \"+_vm._s(_vm.sphere.size)+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"sphereRadius\",\"value\":_vm.sphere.size,\"min\":\"1\",\"max\":\"10\"},on:{\"change\":function($event){return _vm.sphereRadiusChanged($event)}}})],1),_c('b-form-group',{attrs:{\"label\":\"绘制球体的模式\"}},[_c('b-radio-group',{staticClass:\"sphereMode\",model:{value:(_vm.sphere.drawMode),callback:function ($$v) {_vm.$set(_vm.sphere, \"drawMode\", $$v)},expression:\"sphere.drawMode\"}},[_c('div',[_c('b-radio',{attrs:{\"value\":0}},[_vm._v(\"Surface\")])],1),_c('div',[_c('b-radio',{attrs:{\"value\":1}},[_vm._v(\"Line\")])],1),_c('div',[_c('b-radio',{attrs:{\"value\":2}},[_vm._v(\"lessLine\")])],1)])],1)],1),_c('b-card',{attrs:{\"header\":\"其他参数设置\"}},[_c('div',{staticClass:\"option\"},[_c('b-checkbox',[_vm._v(\"绘制路径\")]),_c('b-checkbox',[_vm._v(\"绘制模拟器\")]),_c('b-checkbox',[_vm._v(\"球坐标系\")]),_c('b-checkbox',[_vm._v(\"显示修正圆圈\")])],1),_c('div',{staticClass:\"action\"},[_c('b-btn',[_vm._v(\"重置摄像机位置\")]),_c('b-btn',[_vm._v(\"重置路径\")]),_c('b-btn',[_vm._v(\"打点\")]),_c('b-btn',[_vm._v(\"重置打点\")])],1),_c('div',[_vm._v(\"球面透明度: \"+_vm._s(_vm.sphereAlpha)+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"sphereOpacity\",\"value\":_vm.sphereAlpha,\"min\":\"0\",\"max\":\"100\"},on:{\"change\":function($event){_vm.sphere.alpha = parseFloat($event) / 100}}})],1),_c('div',[_vm._v(\"指示器大小: \"+_vm._s(_vm.indicatorSize.toFixed(1))+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"indicatorSize\",\"value\":_vm.indicatorSize,\"min\":\"1\",\"max\":\"100\"},on:{\"change\":function($event){return _vm.setIndicatorSize($event)}}})],1),_c('div',[_vm._v(\"轨迹宽度 \"+_vm._s(_vm.pathWidth)+\"\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"pathWidth\",\"value\":_vm.pathWidth,\"min\":\"1\",\"max\":\"100\"},on:{\"change\":function($event){return _vm.setPathWidth($event)}}})],1),_c('div',{staticClass:\"hidden\"},[_vm._v(\"模拟器大小\\r\\n      \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"pathWidth\",\"value\":_vm.pathWidth,\"min\":\"1\",\"max\":\"100\"},on:{\"change\":function($event){return _vm.setPathWidth($event)}}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div>\r\n  <b-card header=\"相机设置\" >\r\n    <div>摄像机θ角(与Z轴正半轴夹角): {{ cameraTheta.toFixed(1) }}\r\n      <b-form-input type=\"range\" id=\"cameraTheta\" :value=\"cameraTheta\" \r\n        min=\"0\" max=\"180\" @change=\"cameraThetaChanged($event)\"/>\r\n    </div>\r\n    <div>摄像机φ角(与X轴正半轴夹角): {{ cameraPhi.toFixed(1) }}\r\n      <b-form-input type=\"range\" id=\"cameraPhi\" :value=\"cameraPhi\" \r\n      min=\"0\" max=\"360\" @change=\"cameraPhiChanged($event)\" />\r\n    </div>\r\n    <div>摄像机距原点: {{cameraDis}}\r\n      <b-form-input type=\"range\" id=\"cameraDis\" :value=\"cameraDis\" \r\n        min=\"1\" max=\"180\" @change=\"cameraDisChanged($event)\" />\r\n    </div>\r\n  </b-card>\r\n  <b-card header=\"球体参数设置\"> \r\n    <div>参考球半径: {{sphere.size}}\r\n      <b-form-input type=\"range\" id=\"sphereRadius\" :value=\"sphere.size\" min=\"1\" max=\"10\" @change=\"sphereRadiusChanged($event)\" />\r\n    </div>\r\n    <b-form-group label=\"绘制球体的模式\">\r\n      <b-radio-group v-model=\"sphere.drawMode\" class=\"sphereMode\">\r\n        <div><b-radio :value=\"0\">Surface</b-radio></div>\r\n        <div><b-radio :value=\"1\">Line</b-radio></div>\r\n        <div><b-radio :value=\"2\">lessLine</b-radio></div>\r\n      </b-radio-group>\r\n    </b-form-group>\r\n  </b-card>\r\n  <b-card header=\"其他参数设置\"> \r\n    <div class=\"option\">\r\n      <b-checkbox>绘制路径</b-checkbox>\r\n      <b-checkbox>绘制模拟器</b-checkbox>\r\n      <b-checkbox>球坐标系</b-checkbox>\r\n      <b-checkbox>显示修正圆圈</b-checkbox>\r\n    </div>\r\n    <div class=\"action\">\r\n      <b-btn>重置摄像机位置</b-btn>\r\n      <b-btn>重置路径</b-btn>\r\n      <b-btn>打点</b-btn>\r\n      <b-btn>重置打点</b-btn>\r\n    </div>\r\n    <div>球面透明度: {{sphereAlpha}}\r\n      <b-form-input type=\"range\" id=\"sphereOpacity\" :value=\"sphereAlpha\" min=\"0\" max=\"100\" \r\n        @change=\"sphere.alpha = parseFloat($event) / 100\" />\r\n    </div>\r\n    <div>指示器大小: {{indicatorSize.toFixed(1)}}\r\n      <b-form-input type=\"range\" id=\"indicatorSize\" :value=\"indicatorSize\" min=\"1\" max=\"100\" \r\n        @change=\"setIndicatorSize($event)\" />\r\n    </div>\r\n    <div>轨迹宽度 {{pathWidth}}\r\n      <b-form-input type=\"range\" id=\"pathWidth\" :value=\"pathWidth\" min=\"1\" max=\"100\" \r\n        @change=\"setPathWidth($event)\" />\r\n    </div>\r\n    <div class=\"hidden\">模拟器大小\r\n      <b-form-input type=\"range\" id=\"pathWidth\" :value=\"pathWidth\" min=\"1\" max=\"100\" \r\n        @change=\"setPathWidth($event)\" />\r\n    </div>\r\n  </b-card>\r\n\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nfunction radToDeg(rad) {\r\n  return rad * 180 / Math.PI;\r\n}\r\nexport default {\r\n  data() {\r\n    return {\r\n      camera: {\r\n        theta: 0,\r\n        phi: 0,\r\n        dis: 4\r\n      },\r\n      sphere: {\r\n        size: 4,\r\n        alpha: 1,\r\n        drawMode: 0,\r\n      },\r\n      indicator: {\r\n        size: 1\r\n      },\r\n      sensorPath: {\r\n        size: 1\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    cameraPhi() {\r\n      return radToDeg(this.camera.phi);\r\n    }, \r\n    cameraTheta() {\r\n      return radToDeg(this.camera.theta);\r\n    },\r\n    cameraDis() {\r\n      return this.camera.dis;\r\n    },\r\n    sphereAlpha() {\r\n      return this.sphere.alpha * 100;\r\n    },\r\n    indicatorSize() {\r\n      return this.indicator.size * 100;\r\n    },\r\n    pathWidth() {\r\n      return this.sensorPath.size;\r\n    }\r\n  },\r\n  methods: {\r\n    cameraPhiChanged(value) {\r\n      this.camera.rotate(null, value, null);\r\n    },\r\n    cameraThetaChanged(value) {\r\n      this.camera.rotate(value, null, null);\r\n    },\r\n    cameraDisChanged(value) {\r\n      this.camera.rotate(null, null, value);\r\n    },\r\n    sphereRadiusChanged(value) {\r\n      this.sphere.setSize(value);\r\n      // this.camera.rotate()\r\n    },\r\n    setIndicatorSize(value) {\r\n      this.indicator.setScale(parseFloat(value) / 100);\r\n    },\r\n    setPathWidth(value) {\r\n      this.sensorPath.setSize(value);\r\n    },\r\n    init(spacePath) {\r\n      this.spacePath = spacePath;\r\n      console.log(spacePath)\r\n      this.camera = spacePath.camera;\r\n      this.sphere = spacePath.sphere;\r\n      this.indicator = spacePath.sensorPoint;\r\n      this.sensorPath = spacePath.sensorPath;\r\n      console.log(this.sphere)\r\n    }\r\n  },\r\n  mounted() {\r\n    console.log(\"Sidebar Mounted\")\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=0d1f5580&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Picth\")]),_c('div',[_vm._v(\"Roll\")]),_c('div',[_vm._v(\"Heading\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n<div>\r\n  <div>Picth</div>\r\n  <div>Roll</div>\r\n  <div>Heading</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Information.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Information.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Information.vue?vue&type=template&id=7f9ab7d8&\"\nimport script from \"./Information.vue?vue&type=script&lang=js&\"\nexport * from \"./Information.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Heading\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"heading\",\"min\":\"0\",\"max\":\"360\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'heading', 'value': _vm.heading})}},model:{value:(_vm.heading),callback:function ($$v) {_vm.heading=$$v},expression:\"heading\"}})],1),_c('div',[_vm._v(\"Picth\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"pitch\",\"min\":\"-90\",\"max\":\"90\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'pitch', 'value': _vm.pitch})}},model:{value:(_vm.pitch),callback:function ($$v) {_vm.pitch=$$v},expression:\"pitch\"}})],1),_c('div',[_vm._v(\"Roll\\n    \"),_c('b-form-input',{attrs:{\"type\":\"range\",\"id\":\"roll\",\"min\":\"0\",\"max\":\"180\"},on:{\"change\":function($event){return _vm.$emit('valueChanged', {'key': 'roll', 'value': _vm.roll})}},model:{value:(_vm.roll),callback:function ($$v) {_vm.roll=$$v},expression:\"roll\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div>Heading\r\n      <b-form-input type=\"range\" id=\"heading\" v-model=\"heading\" min=\"0\" max=\"360\" \r\n        @change=\"$emit('valueChanged', {'key': 'heading', 'value': heading})\" />\r\n    </div>\r\n    <div>Picth\r\n      <b-form-input type=\"range\" id=\"pitch\" v-model=\"pitch\" min=\"-90\" max=\"90\"\r\n        @change=\"$emit('valueChanged', {'key': 'pitch', 'value': pitch})\"/>\r\n    </div>\r\n    <div>Roll\r\n      <b-form-input type=\"range\" id=\"roll\" v-model=\"roll\" min=\"0\" max=\"180\"\r\n        @change=\"$emit('valueChanged', {'key': 'roll', 'value': roll})\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      heading: 0,\r\n      pitch: 0,\r\n      roll: 0,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DebugPanel.vue?vue&type=template&id=7a4552b7&\"\nimport script from \"./DebugPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./DebugPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var states = {\r\n  gl: \"not initialized\",\r\n};\r\n\r\nvar attributes = {};  // attribute variables from shader\r\nvar uniforms = {};    // uniform variables from shader\r\nexport {states, uniforms, attributes};","import {states} from './Variables'\r\n/**\r\n* 所有需要绘制的对象在构造时需要调用此函数对参数进行初始化\r\n**/\r\nclass PaintObj {\r\n  constructor(props) {\r\n    if (props === undefined) {\r\n      props = {};\r\n    }\r\n    this.sides = props.sides || 24;\r\n    this.alpha = props.alpha || 1.0;\r\n    this.color = props.color || [0.8, 0.8, 0.8];\r\n    this.size = props.size || 1.0;\r\n    this.gl = props.gl;\r\n    this.buffers = {};\r\n    this.mMatrix = mat4.create();\r\n    this.pvMatrix = mat4.create();\r\n    this.mvpMatrix = mat4.create();\r\n    this.quat = quat.create();\r\n    this.vscale = vec3.fromValues(1.0, 1.0, 1.0); // vec3.create equals to fromValues(0.0, 0.0, 0.0)\r\n    this.translation = vec3.create();\r\n    this.visible = true;\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._z = 0;\r\n    this._rotateX = 0;\r\n    this._rotateY = 0;\r\n    this._rotateZ = 0;\r\n  }\r\n\r\n  /**\r\n  * @param {*} data  数组或 long 型整数\r\n  * @param {*} drawtype  STATIC or DYNAMIC\r\n  * @param {*} type  ELEMENT or ARRAY\r\n  */\r\n  createArrayBuffer(data, drawtype, type) {\r\n    var buffer = states.gl.createBuffer();\r\n\r\n    if (type === undefined) {\r\n      type = states.gl.ELEMENT_ARRAY_BUFFER;\r\n      buffer.itemSize = data.itemSize || 1;\r\n      if (data instanceof Float32Array) {\r\n        type = states.gl.ARRAY_BUFFER;\r\n        buffer.itemSize = data.itemSize || 3;\r\n      }\r\n      buffer.numItems = data.length / buffer.itemSize;\r\n    }\r\n\r\n    states.gl.bindBuffer(type, buffer);\r\n    states.gl.bufferData(type, data, drawtype);\r\n    states.gl.bindBuffer(type, null);\r\n    return buffer;\r\n  }\r\n\r\n  \r\n  subBuffer(buffer, offset, data) {\r\n    var type = states.gl.ELEMENT_ARRAY_BUFFER;\r\n    if (data instanceof Float32Array) {\r\n      type = states.gl.ARRAY_BUFFER;\r\n    }\r\n\r\n    states.gl.bindBuffer(type, buffer);\r\n    states.gl.bufferSubData(type, offset, data);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* 计算出圆柱体需要的顶点和索引\r\n**/\r\nfunction cylinderShape(radius, segment, height) {\r\n  var bottom = circleShape(radius, segment);\r\n  var upper = circleShape(radius, segment, 0, Math.PI * 2, height);\r\n  var vertex = bottom.concat(upper);\r\n\r\n  var index = [];\r\n  var i = 0;\r\n  // bottom\r\n  for (i = 1; i < segment; i++) {\r\n    index.push(0, i + 1, i);\r\n  }\r\n  index.push(0, 1, i);\r\n\r\n  // upper\r\n  for (i = segment + 2; i < 2 * segment + 1; i++) {\r\n    index.push(segment + 1, i, i + 1);\r\n  }\r\n  index.push(segment + 1, i, segment + 2);\r\n\r\n  // side\r\n  for (i = 1; i < segment; i++) {\r\n    index.push(segment + 1 + i, i, i + 1);\r\n    index.push(segment + i + 1, i + 1, segment + i + 2);\r\n  }\r\n  index.push(segment + 1 + i, i, 1);\r\n  index.push(segment + i + 1, 1, segment + 2);\r\n\r\n  return {\r\n    vertex: vertex,\r\n    index: index\r\n  }\r\n}\r\n\r\n/**\r\n* calculate circle on the plane xoy with given sides and distance between each vertex and origin point\r\n* Note that the origin point is the first element of the array and\r\n* the direction of the circle is anti-clock viewed from Z+ to Z-\r\n*\r\n* @return vertex.size = (segment+1) * 3\r\n*/\r\nfunction circleShape(radius, segment, thetaStart, thetaEnd, pos) {\r\n  var vertex = [];\r\n  var x = 0.0;\r\n  var y = 0.0;\r\n  var z = pos || 0.0;\r\n  var start = thetaStart || 0;\r\n  var end = thetaEnd || Math.PI * 2;\r\n\r\n  var dtheta = (end - start) / segment;\r\n  vertex = vertex.concat([x, y, 0.0]);\r\n  for (var i = 0; i < segment; i++) {\r\n    x = Math.cos(i * dtheta + start) * radius;\r\n    y = Math.sin(i * dtheta + start) * radius;\r\n    vertex = vertex.concat([x, y, z]);\r\n  }\r\n  return vertex;\r\n}\r\n\r\n\r\n\r\n/**\r\n*  @param {Array} vertex  the vertices to rotate around the origin point\r\n*  @param {Number}   theta is in terms of RAD\r\n*  @param {Number}   beta  is in terms of RAD\r\n*  @desc 将所有顶点按照世界坐标轴 Y 轴，Z 轴依次进行 theta 角和 beta 角的旋转\r\n**/\r\nfunction rotateVertex(vertex, theta, beta, dis) {\r\n  var v = vec3.create();\r\n  var d = dis || 0;\r\n  for (var i = 0; i < vertex.length; i += 3) {\r\n    vec3.set(v, vertex[i + 0], vertex[i + 1], vertex[i + 2] + d);\r\n    vec3.rotateY(v, v, [0, 0, 0], theta);\r\n    vec3.rotateZ(v, v, [0, 0, 0], beta);\r\n    vertex[i + 0] = v[0];\r\n    vertex[i + 1] = v[1];\r\n    vertex[i + 2] = v[2];\r\n  }\r\n  //    return vertex;\r\n}\r\n\r\n\r\nfunction degToRad(deg) {\r\n  return deg * Math.PI / 180;\r\n}\r\n\r\n\r\n/**\r\n* 用更紧凑的方式得到顶点信息的数组，\r\n* 认为每 9 个数据表示一个顶点、颜色和法向量数据，\r\n* 可根据 color，normal 的长度自动进行颜色的复制\r\n**/\r\nfunction genVertices(vertex, color, normal) {\r\n  var vertices = [];\r\n  var i = 0;\r\n  if (color.length <= 3) {\r\n    if (normal === undefined) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n      }\r\n    } else if (normal.length <= 3) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n        vertices = vertices.concat(normal[0], normal[1], normal[2]);\r\n      }\r\n    } else {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[0], color[1], color[2]);\r\n        vertices = vertices.concat(normal[i], normal[i + 1], normal[i + 2]);\r\n      }\r\n    }\r\n  } else {\r\n    if (normal === undefined) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n      }\r\n    } else if (normal.length <= 3) {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n        vertices = vertices.concat(normal[0], normal[1], normal[2]);\r\n      }\r\n    } else {\r\n      for (i = 0; i < vertex.length; i += 3) {\r\n        vertices = vertices.concat(vertex[i], vertex[i + 1], vertex[i + 2]);\r\n        vertices = vertices.concat(color[i], color[i + 1], color[i + 2]);\r\n        vertices = vertices.concat(normal[i], normal[i + 1], normal[i + 2]);\r\n      }\r\n    }\r\n  }\r\n\r\n  return vertices;\r\n}\r\n\r\n\r\n/**\r\n* 假设球心即为原点，将球极坐标系转换成平面直角坐标系\r\n* @param   theta {Numer}    Rad 弧度制，球心到顶点的连线与 Z 轴正方向的夹角为 theta\r\n* @param   phi  {Numer}    Rad 弧度制，球心到顶点的连线在 xoy 平面上的投影与 X 轴正方向的夹角为 phi\r\n* @param   r     {Number}  球半径\r\n* @return  {vec3}    顶点的坐标，表示\r\n*/\r\nfunction coordCarte(theta, phi, r) {\r\n  var st = Math.sin(theta);\r\n  var ct = Math.cos(theta);\r\n  var sp = Math.sin(phi);\r\n  var cp = Math.cos(phi);\r\n  var x = r * st * cp;\r\n  var y = r * st * sp;\r\n  var z = r * ct;\r\n  // return [x, y, z]\r\n  return vec3.fromValues(x, y, z);\r\n}\r\n\r\nexport {PaintObj, cylinderShape, circleShape, rotateVertex, degToRad, genVertices,\r\n  coordCarte\r\n};","import {PaintObj, cylinderShape, rotateVertex, degToRad, genVertices} from './PaintObj'\r\nimport {states, uniforms, attributes} from './Variables'\r\n/**\r\n* Coord Object\r\n* 用于绘制坐标轴\r\n**/\r\nclass Coord extends PaintObj {\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"Coord\";\r\n    this.length = 10.0;\r\n    this.init();\r\n  }\r\n  \r\n  init() {\r\n    var xcoord = cylinderShape(0.01, this.sides, this.length);\r\n    rotateVertex(xcoord.vertex, degToRad(90), 0);\r\n    var xvertices = genVertices(xcoord.vertex, [0.9, 0.1, 0.0], [1.0, 1.0, 1.0]);\r\n\r\n    var ycoord = cylinderShape(0.01, this.sides, this.length);\r\n    rotateVertex(ycoord.vertex, degToRad(90), degToRad(90));\r\n    var yvertices = genVertices(ycoord.vertex, [0.0, 0.9, 0.0], [1.0, 1.0, 1.0]);\r\n\r\n    var zcoord = cylinderShape(0.01, this.sides, this.length);\r\n    var zvertices = genVertices(zcoord.vertex, [0.0, 0.0, 0.9], [1.0, 1.0, 1.0]);\r\n\r\n    var vertices = [];\r\n    vertices = vertices.concat(xvertices);\r\n    vertices = vertices.concat(yvertices);\r\n    vertices = vertices.concat(zvertices);\r\n\r\n    var index = [];\r\n    index = index.concat(xcoord.index);\r\n    //        index = index.concat( ycoord.index );\r\n    var length = 2 * this.sides + 2;\r\n    for (var i = 0; i < ycoord.index.length; i++) {\r\n      index.push(length + ycoord.index[i]);\r\n    }\r\n    //        index = index.concat( zcoord.index );\r\n    length = 4 * this.sides + 4;\r\n    for (var i = 0; i < zcoord.index.length; i++) {\r\n      index.push(length + zcoord.index[i]);\r\n    }\r\n    this.buffers.vertex = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.buffers.index = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n    this.buffers.index.numItems = index.length;\r\n  }\r\n\r\n  paint() {\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    // console.log(\"Coord\", this)\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.buffers.vertex);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.buffers.index);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.buffers.index.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n    // this.paint()\r\n  }\r\n}\r\n// end of Coord prototype\r\n\r\nexport default Coord","import {states, attributes, uniforms} from './Variables'\r\nimport {coordCarte, degToRad} from './PaintObj'\r\n\r\n/**\r\n* @class Camera\r\n* @desc  透视角度摄像机，通过该类控制视窗变化\r\n*    设置 pos 改变摄像机的位置\r\n*    设置 up  改变摄像机的上方向\r\n*    设置 lookat 改变摄像机的视点\r\n* 摄像机对象维护 pvMatrix，并会在视图矩阵更新时通知相关联的 watcher 对象，\r\n* 若没有设置 watcher 对象则不会更新视图。\r\n* 默认摄像机的 lookat 一直是 [0, 0, 0] 原点，up 是 Z 轴方向\r\n**/\r\nclass Camera {\r\n  defaultTheta = 45\r\n  defaultPhi = 45\r\n  defaultDis = 15\r\n  defaultViewWidth = 800\r\n  defaultViewHeight = 600\r\n\r\n  constructor(props) {\r\n    //    PaintObj.call( this );\r\n    this.type = \"Camera\";\r\n    \r\n    this.theta = props.theta || this.defaultTheta;\r\n    this.theta = degToRad(this.theta);\r\n    this.phi = props.phi || this.defaultPhi;\r\n    this.phi = degToRad(this.phi);\r\n    this.dis = props.dis || this.defaultDis;\r\n\r\n    this.width = props.width || this.defaultViewWidth;\r\n    this.height = props.height || this.defaultViewHeight;\r\n    this.pos = coordCarte(this.theta, this.phi, this.dis);\r\n    this.up = vec3.fromValues(0, 0, 1);\r\n    this.lookat = vec3.fromValues(0, 0, 0);\r\n    this.pMatrix = mat4.create();\r\n    this.vMatrix = mat4.create();\r\n    this.pvMatrix = mat4.create();\r\n    \r\n    this.setSize(this.width, this.height);\r\n  }\r\n\r\n  /**\r\n    * @desc 更新视图矩阵并通知 watcher 对象 pvMatrix 已更新\r\n  **/\r\n  update() {\r\n    mat4.lookAt(this.vMatrix, this.pos, this.lookat, this.up);\r\n    mat4.mul(this.pvMatrix, this.pMatrix, this.vMatrix);\r\n    if (this.watcher !== undefined) {\r\n      this.watcher(this.pvMatrix);\r\n    }\r\n  }\r\n\r\n  /**\r\n  * 设置 watcher 对象\r\n  **/\r\n  recv(watcher) {\r\n    this.watcher = watcher;\r\n  }\r\n\r\n  /**\r\n  * 设置摄像机的旋转操作\r\n  * @param a_theta  用角度制表示的 theta 角，与 Z 轴正半轴的夹角,\r\n  *   [0, 180]，为了便于区分参数中的角度制和弧度制，在变量名前加 a 表示角度制\r\n  * @param a_phi 用角度制表示的 phi 角， 与 X 轴正半轴的夹角，[0, 360]\r\n  * @param r  到原点的距离\r\n  * @note  some problem occurred when x or y equals to zero\r\n  *    because you can't set up [0, 0, 1] and look at [0, 0, 0] the origin point.\r\n  **/\r\n  rotate(a_theta, a_phi, r) {\r\n    if(a_theta) {\r\n      if (a_theta < 0.01) {\r\n        a_theta = 0.01;\r\n      } else if (a_theta > 179.99) {\r\n        a_theta = 179.99;\r\n      }\r\n      this.theta = degToRad(a_theta);\r\n    }\r\n    if(a_phi) {\r\n      this.phi = degToRad(a_phi);\r\n    }\r\n    if(r) {\r\n      this.dis = r;\r\n    }\r\n    /**\r\n     * 当 POS 距离 图像超过 1 时，无法显示\r\n     */\r\n    // this.pos = [0.65, 0.65, 0.65]\r\n    this.pos = coordCarte(this.theta, this.phi, this.dis);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n  * 设置 gl 的视口，并更新透视矩阵和视图矩阵\r\n  **/\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    states.gl.viewport(0, 0, width, height);\r\n    mat4.perspective(this.pMatrix, 45 / 180 * Math.PI, width / height, 0.5, 500.0);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n  * 重置摄像机位置\r\n  **/\r\n  reset() {\r\n    this.rotate(this.defaultTheta, this.defaultPhi, this.dis);\r\n    this.update();\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n* @desc 场景控制器\r\n* 1. 封装了对 gl 的设置，若无必要，不用再设置 gl；异步加载着色器代码，封装了对着色器的编译连接等操作。\r\n* 包含对全局变量 attributes 和 uniforms 的设置\r\n* 2. 为了方便，实际上将 Renderer 的功能集成到了 Scene 中，需要绘制时，调用 Scene 对象的 render 方法即可。\r\n* 3. 场景只能接收一个 Camera 对象，若多次添加 Camera 对象，则会将最后一个 Camera 对象设为当前的 Camera 对象\r\n**/\r\nclass Scene {\r\n  /**\r\n   * \r\n   * @param {Object} props \r\n   */\r\n  constructor(props) {\r\n    let gl = states.gl;\r\n    // states.gl = gl;\r\n    gl.enable(gl.DEPTH_TEST); // depth test\r\n    gl.depthFunc(gl.LESS);\r\n    gl.enable(gl.CULL_FACE); // 设置遮挡剔除有效\r\n    gl.cullFace(gl.BACK);\r\n    gl.clearColor(0.97, 0.97, 0.97, 1.0); // background color\r\n    gl.clearDepth(1.0);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.enable(gl.BLEND); // enable blend for alpha\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n    this.type = \"Scene\";\r\n    this.objs = [];\r\n    this.light_direct = [0.35, 0.35, 0.7];\r\n  }\r\n\r\n\r\n  /**\r\n    * @params first  将物体添加到序列头部，每次绘制时优先绘制\r\n    * @desc 添加要绘制的物体。不包含摄像机\r\n  **/\r\n  add(obj, first) {\r\n    if (obj === undefined) {\r\n      console.log(\"[Warn] Undefined on Scene adding.\");\r\n      return;\r\n    }\r\n\r\n    if (first) {\r\n      this.objs.unshift(obj);\r\n    } else {\r\n      this.objs.push(obj);\r\n    }\r\n    if (this.camera !== undefined) {\r\n      // force camera to notify all added object refresh mvpMatrix\r\n      this.camera.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添加摄像机，重复添加则会更新 camera 对象（只有一个有效）\r\n   * \r\n   * @param {*} camera \r\n   */\r\n  addCamera(camera) {\r\n    this.camera = camera;\r\n    camera.recv((matrix) => {\r\n      /**\r\n        * 通知所有物体视图矩阵有变化\r\n       **/\r\n      for (var i = 0; i < this.objs.length; i++) {\r\n        this.objs[i].onViewChanged(matrix);\r\n      }\r\n      // this.render()\r\n    });\r\n  }\r\n\r\n  /**\r\n  * 依次绘制物体\r\n  **/\r\n  render() {\r\n    this.running = true;\r\n    var scope = this;\r\n    function r() {\r\n      states.gl.clear(states.gl.COLOR_BUFFER_BIT | states.gl.DEPTH_BUFFER_BIT);   // clear color buffer and depth buffer bit\r\n      for (var i = 0; i < scope.objs.length; i++) {\r\n        scope.objs[i].paint();\r\n      }\r\n      if(scope.running) {\r\n        requestAnimationFrame(r)\r\n      }\r\n    }\r\n    requestAnimationFrame(r)\r\n    // r()\r\n    // this.render()\r\n  }\r\n\r\n\r\n  /*\r\n  * 根据渲染类型返回渲染器\r\n  * @param  gl       gl 对象\r\n  * @param  codestr  渲染程序代码，具体渲染方式\r\n  * @param  type     渲染类型\r\n  * @return  渲染器\r\n  */\r\n  getShader(gl, codestr, type) {\r\n    // 创建渲染器\r\n    var shader = gl.createShader(type);\r\n\r\n    gl.shaderSource(shader, codestr);\r\n    // 编译渲染器\r\n    gl.compileShader(shader);\r\n\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n      console.log(\"JS:Shader compile failed\");\r\n      console.log(gl.getShaderInfoLog(shader));\r\n      return null;\r\n    }\r\n    //    console.log(\"compile done!\");\r\n    return shader;\r\n  }\r\n\r\n  /**\r\n  * 初始化着色器\r\n  * @desc 异步加载着色器代码并在完成加载后进行编译链接\r\n  * @param {String} vertexCode\r\n  * @param {String} fragCode\r\n  **/\r\n  initShaders(vertexCode, fragCode) {\r\n    var shaderProgram = states.gl.createProgram();\r\n    var vertexShader = this.getShader(states.gl, vertexCode, states.gl.VERTEX_SHADER);\r\n    states.gl.attachShader(shaderProgram, vertexShader);\r\n\r\n    var fragShader = this.getShader(states.gl, fragCode, states.gl.FRAGMENT_SHADER);\r\n    states.gl.attachShader(shaderProgram, fragShader);\r\n    this._onShaderReady(shaderProgram);\r\n\r\n  }\r\n\r\n  /**\r\n  * 在着色器代码准备好后进行着色器的编译链接；\r\n  * 设置全局变量 attributes 和 uniforms\r\n  **/\r\n  _onShaderReady(shaderProgram) {\r\n    states.gl.linkProgram(shaderProgram);\r\n    states.gl.useProgram(shaderProgram);\r\n\r\n    attributes.vertex_position = states.gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\r\n    states.gl.enableVertexAttribArray(attributes.vertex_position);\r\n\r\n    attributes.vertex_normal = states.gl.getAttribLocation(shaderProgram, \"aVertexNormal\");\r\n    states.gl.enableVertexAttribArray(attributes.vertex_normal)\r\n\r\n    attributes.color = states.gl.getAttribLocation(shaderProgram, \"aColor\");\r\n    states.gl.enableVertexAttribArray(attributes.color);\r\n\r\n    attributes.texture = states.gl.getAttribLocation(shaderProgram, \"aTexture\");\r\n    attributes.color = states.gl.getAttribLocation(shaderProgram, \"aColor\");\r\n\r\n    uniforms.pmv_matrix = states.gl.getUniformLocation(shaderProgram, \"uPMVMatrix\"); // 透视模型视图矩阵\r\n    uniforms.m_matrix = states.gl.getUniformLocation(shaderProgram, \"uMMatrix\")\r\n    uniforms.n_matrix = states.gl.getUniformLocation(shaderProgram, \"uNMatrix\"); // 法线\r\n    uniforms.alpha = states.gl.getUniformLocation(shaderProgram, \"uAlpha\");\r\n    uniforms.frag_color = states.gl.getUniformLocation(shaderProgram, \"uFragColor\");\r\n    uniforms.has_texture = states.gl.getUniformLocation(shaderProgram, \"uHasTexture\");\r\n    uniforms.light_direction = states.gl.getUniformLocation(shaderProgram, \"uLightDirection\"); // 光照\r\n    uniforms.specColor = states.gl.getUniformLocation(shaderProgram, \"uSpecColor\");\r\n    uniforms.vertexColor = states.gl.getUniformLocation(shaderProgram, \"uVertColor\");\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.n_matrix, false, mat4.create());\r\n    states.gl.uniform3fv(uniforms.light_direction, this.light_direct);  // where light origins\r\n  }\r\n}\r\n\r\nexport {Camera, Scene}","import {PaintObj, cylinderShape, genVertices, coordCarte, degToRad} from './PaintObj'\r\nimport {states, attributes, uniforms} from './Variables'\r\n\r\n/**\r\n* SensorPoint Object\r\n* 在三维空间中绘制斑点，用于模拟传感器的指向。\r\n* 当指向变化时会通知注册的回调函数，以便其它对象可以得到最新的传感器位置\r\n* 尚未实现的功能：\r\n* - 从原点指向 Point 的圆锥体\r\n**/\r\nclass SensorPoint extends PaintObj {\r\n  constructor(props) {\r\n    // PaintObj.call(this, props);\r\n    super(props);\r\n    this.type = \"SensorPoint\";\r\n    // the reason why rotation and then translation is out of expections\r\n    // but if rMatrix is introduced, the result seems good\r\n    // now all vertices are calculated by function, no need for rMatrix\r\n    // this.rMatrix  = mat4.create();\r\n    this.inv_color = props.inv_color || [0.0, 1.0, 0.0];\r\n    this.dis = 4;\r\n    this.pitch = 0;\r\n    this.heading = 0;\r\n    this.headingOffset = 0;\r\n    this.roll = 0;\r\n    this.callbacks = [];\r\n    this.init();\r\n  }\r\n  \r\n  init() {\r\n    var cylinder = cylinderShape(this.size, this.sides, 0.01);\r\n\r\n    var vertex = cylinder.vertex;\r\n    var index = cylinder.index;\r\n\r\n    var i = 0;\r\n    var color = [];\r\n    for (i = 0; i <= this.sides; i++) {\r\n      color = color.concat(this.inv_color);\r\n    }\r\n    for (i = 0; i <= this.sides; i++) {\r\n      color = color.concat(this.color);\r\n    }\r\n\r\n    var vertices = genVertices(vertex, color, [0, 1, 1]);\r\n    this.index_count = index.length;\r\n\r\n    this.buffers.vertex = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.buffers.index = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n  paint() {\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.buffers.vertex);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);          //  set alpha value\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.buffers.index);\r\n    states.gl.drawElements(states.gl.TRIANGLES, this.index_count, states.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size;\r\n    vec3.set(this.vscale, size, size, size);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} r  中心点与原点的距离\r\n   * @param {*} a_theta  角度制（与Z轴正半轴的夹角）\r\n   * @param {*} a_phi    角度制（与X轴正半轴的夹角）\r\n   */\r\n  setTranslation(r, a_theta, a_phi) {\r\n    this.translation = coordCarte(degToRad(a_theta), degToRad(a_phi), r);\r\n    quat.fromEuler(this.quat, 0, a_theta, a_phi);\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n   * 根据给定的参数更新俯仰角，航向角，中心点与原点的距离等\r\n   * @param {*} params  \r\n   * dis  中心点与原点的距离\r\n   * pitch 俯仰角（与X轴平面的夹角，在 Z 轴正向一侧为正）\r\n   * heading 航向角（在 XOY 平面上的投影与X轴正半轴的夹角）\r\n   * roll 横滚角。对于 SensorPoint 对象来说没有作用\r\n   */\r\n  setParam(params) {\r\n\r\n    this.dis = params.dis || this.dis;\r\n    if(params.pitch) {\r\n      this.pitch = params.pitch;\r\n    }\r\n    if(params.heading) {\r\n      this.heading = params.heading;\r\n      params.heading = params.heading - this.headingOffset;\r\n    }\r\n    if(params.roll) {\r\n      this.roll = params.roll;\r\n    }\r\n    var theta = 90 - this.pitch;\r\n    this.setTranslation(this.dis, theta, this.heading);\r\n  }\r\n\r\n  /**\r\n    * 更新自身的模型视图矩阵并通知已注册的回调函数\r\n  **/\r\n  update() {\r\n    mat4.fromRotationTranslationScale(this.mMatrix,\r\n      this.quat,\r\n      this.translation,\r\n      this.vscale);\r\n    this.onViewChanged();\r\n\r\n    var spherical = this.spherical();\r\n    for (var i = 0; i < this.callbacks.length; i++) {\r\n      this.callbacks[i]({\r\n        dis: this.dis, pitch: this.pitch, heading: this.heading,\r\n        roll: this.roll, theta: spherical[0], phi: spherical[1],\r\n        size: this.size\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n    * 注册回调函数\r\n  **/\r\n  addParamCallback(cb) {\r\n    this.callbacks.push(cb);\r\n  }\r\n\r\n  /**\r\n  * @param {Number} pitch   range [-90, 90]\r\n  * @param {Number} heading range [0, 360]\r\n  * @returns {Vec3} the angle returned is in unit of rad  vec[0] and vec[1] is in unit of RAD\r\n  *  当前指向的球坐标系坐标\r\n  */\r\n  spherical() {\r\n    var u = (90 - this.pitch) / 180 * Math.PI;\r\n    var v = this.heading / 180 * Math.PI;\r\n    return vec3.fromValues(u, v, this.dis);\r\n  }\r\n\r\n  // 重置指向\r\n  reset() {\r\n    this.headingOffset += this.heading;\r\n    //        console.log( this.heading, this.headingOffset );\r\n    this.setParam({ pitch: this.pitch, heading: this.heading, roll: this.roll, dis: this.dis });\r\n  }\r\n}\r\n// end of SensorPoint prototype\r\n\r\n/**\r\n* SensorPath Object\r\n* 1. 绘制传感器的路径，由于绘制路径采用的是记录传感器位置周围点的方法。因此很可能在运行过程中出现缓冲区被用完的情况，\r\n* 会自动申请新的缓冲区，记录的点越多，需要的缓冲区越多。\r\n* 2. 每申请一次约占用 90k 的内存（或显存）。另外 js 数组中保存的数据也会占用内存，所以根据已写入缓冲区的数据量进行\r\n* 偏移，对之后的缓冲区进行写操作，不在 js 数组中保留所有的点。\r\n* 3. 18.03.03 将路径绘制成虚线的绘制方法存在问题。因此路径每隔 gap 段绘制一次并没有实现，调整 gap 不会\r\n* 影响路径的绘制。（即路径以实线形式绘制）\r\n**/\r\nclass SensorPath extends PaintObj{\r\n  MaxPathNum = 4800 * 12\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"SensorPath\";\r\n    this.all_index_count = 0;\r\n    this.cur_path_count = 0;\r\n    this.cur_index_count = 0;\r\n    this.cur_pi = 0; // path index\r\n    this.buffer_path_bytes = this.MaxPathNum * 4; // 4 means the bytes float occupies, 3 means a point contains 3 coordinate\r\n    this.buffer_index_bytes = this.MaxPathNum * 2; // 2 means the bytes uint  occupies\r\n    this.gap = 1; // must equal or greater then 1\r\n    this.pg = 1; // path gap count\r\n    this.init();\r\n  }\r\n\r\n  \r\n  init() {\r\n    this.angle = this.last_point;\r\n    this.path = [];\r\n    this.index = [];\r\n\r\n    // path buffer initialization\r\n    this.buffers.path = [];\r\n    this.buffers.index = [];\r\n\r\n    this.createBuffer();\r\n  }\r\n\r\n  paint() {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);     // set alpha value\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    // 分批绘制路径\r\n    for (var i = 0; i < this.cur_pi; i++) {\r\n      states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.buffers.path[i]);\r\n      states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n      states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.buffers.index[i]);\r\n      states.gl.drawElements(states.gl.TRIANGLES, this.MaxPathNum, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    if (this.cur_index_count > 0) {\r\n      //            console.log( this.cur_index_count );\r\n      states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.buffers.path[this.cur_pi]);\r\n      states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n      states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n      states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.buffers.index[this.cur_pi]);\r\n      states.gl.drawElements(states.gl.TRIANGLES, this.cur_index_count, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  /**\r\n    * @param nangle next sphericalCoord\r\n    * @param langle last sphericalCoord\r\n    */\r\n  updateBuffer(nangle) {\r\n    var langle = [this.last_point.theta, this.last_point.phi, this.last_point.dis];\r\n    var presult = this.getLinearPoint(nangle, langle);\r\n    this.all_index_count += presult.index.length;\r\n\r\n    this.subBuffer(this.buffers.path[this.cur_pi], this.cur_path_count * 4, new Float32Array(presult.vertices));\r\n    this.subBuffer(this.buffers.index[this.cur_pi], this.cur_index_count * 2, new Uint16Array(presult.index));\r\n\r\n    // Note! because the updateSubBuffer() should use the offset as the parameter,\r\n    // the addition of path or index count should be later, or the buffer will be out of its size\r\n    this.cur_path_count += presult.vertices.length;\r\n    this.cur_index_count += presult.index.length;\r\n\r\n    // when path index count is greater or equal to this.MaxPathNum, then a new buffer should be realloced\r\n    // and the counter should be reset\r\n    if (this.cur_index_count >= this.MaxPathNum) {\r\n      this.cur_pi++;\r\n      console.log(\"Info: [Path] create a new buffer!\\n\");\r\n      this.createBuffer();\r\n      this.resetCurrentPath();\r\n    }\r\n  }\r\n\r\n  setGap(gap) {\r\n    this.gap = gap;\r\n  }\r\n\r\n  setSize(size) {\r\n    this.size = size;\r\n  }\r\n\r\n  /**\r\n   * 用于绘制路径所需的顶点和索引, 每次返回 4 个顶点\r\n   * @param {Array} p     p[0] = theta    p[1] = beta    p[2] = radius\r\n   * @param {Array} lp   lp[0] = theta   lp[1] = beta   lp[2] = lradius\r\n   * @return {Object}\r\n   */\r\n  getLinearPoint(p, lp) {\r\n    var s1 = coordCarte(p[0], p[1], p[2]);\r\n    var s2 = coordCarte(lp[0], lp[1], lp[2]);\r\n    var s = [s1[0] - s2[0], s1[1] - s2[1], s1[2] - s2[2]];\r\n    //    console.log(\"s1: \"+ s1 + \"  s2: \"+s2 + \"  s: \" + s +\"\\n\");\r\n    var n0 = coordCarte((p[0] + lp[0]) * 0.5, (p[1] + lp[1]) * 0.5, p[2]);\r\n    var l = vec3.create();\r\n    vec3.cross(l, s, n0);\r\n    vec3.normalize(l, l);\r\n    vec3.scale(l, l, this.size * 0.02);\r\n    //    console.log(\"vec l: \" + vec3.str(l));\r\n\r\n    var vertex;\r\n    var vertices = [];\r\n    var that = this;\r\n\r\n    var pushVertex = function () {\r\n      vertices = vertices.concat(vertex);\r\n      vertices = vertices.concat(that.color);\r\n    }\r\n\r\n    vertex = [s1[0] - l[0], s1[1] - l[1], s1[2] - l[2]];   // 0\r\n    pushVertex();\r\n    vertex = [s1[0] + l[0], s1[1] + l[1], s1[2] + l[2]];   // 1\r\n    pushVertex();\r\n    vertex = [s2[0] - l[0], s2[1] - l[1], s2[2] - l[2]];   // 2\r\n    pushVertex();\r\n    vertex = [s2[0] + l[0], s2[1] + l[1], s2[2] + l[2]];   // 3\r\n    pushVertex();\r\n    // until now, vertices length should be 24\r\n\r\n    var index = [];\r\n    var seg = 6;\r\n    var n = this.cur_path_count / seg;  // it is better than index.length\r\n    index.push(n + 0, n + 2, n + 3, n + 0, n + 3, n + 1);\r\n    index.push(n + 0, n + 3, n + 2, n + 0, n + 1, n + 3);\r\n\r\n    return {\r\n      //            \"point\" : linearPoint,\r\n      //            \"color\" : color,\r\n      \"vertices\": vertices,\r\n      \"index\": index,\r\n    }\r\n  }\r\n\r\n  onSphericalChanged(params) {\r\n    if (this.last_point === undefined) {\r\n      this.last_point = params;\r\n      //            return;\r\n    }\r\n\r\n    var lpos = coordCarte(this.last_point.theta, this.last_point.phi, this.last_point.dis);\r\n    var pos = coordCarte(params.theta, params.phi, params.dis);\r\n    var dist = vec3.dist(lpos, pos);\r\n    var angle = [params.theta, params.phi, params.dis];\r\n\r\n    if (dist > Math.PI * params.dis * 0.002) {\r\n      this.updateBuffer(angle);\r\n      this.angle = angle;\r\n      this.last_point = params;\r\n    }\r\n\r\n    // angle[2] is vector length\r\n    //        if( dist > Math.PI * params.dis * 0.03 ) {\r\n    //            this.updateBuffer( angle );\r\n    //            this.angle      = angle;\r\n    //            this.last_point = params;\r\n    //        } else if( dist > Math.PI * params.dis * 0.001 ) {\r\n    //            this.pg ++;\r\n    //            this.last_point = params;\r\n\r\n    //            if( this.pg === this.gap ) {\r\n    //                this.angle = angle;\r\n    //            }\r\n    //            if( this.pg === this.gap+1 ) {\r\n    //                this.pg = 1;\r\n    //                this.updateBuffer( angle );\r\n    //                this.angle = angle;\r\n    //            }\r\n    //        }\r\n  }\r\n\r\n  // 重置路径变量\r\n  resetCurrentPath(vec) {\r\n    this.cur_path_count = 0;\r\n    this.cur_index_count = 0;\r\n    this.pg = 0;\r\n  }\r\n\r\n  resetAllPath(args) {\r\n    // 删掉无用的buffer，节省内存\r\n    for (var i = 1; i <= this.cur_pi; i++) {\r\n      gl.deleteBuffer(this.buffers.path[i]);\r\n      gl.deleteBuffer(this.buffers.index[i]);\r\n    }\r\n    this.all_index_count = 0;\r\n    this.cur_pi = 0;\r\n    this.last_point = undefined\r\n    this.resetCurrentPath();\r\n  }\r\n\r\n  createBuffer() {\r\n    this.buffers.path[this.cur_pi] = this.createArrayBuffer(this.buffer_path_bytes, states.gl.DYNAMIC_DRAW, states.gl.ARRAY_BUFFER);\r\n    this.buffers.index[this.cur_pi] = this.createArrayBuffer(this.buffer_index_bytes, states.gl.DYNAMIC_DRAW, states.gl.ELEMENT_ARRAY_BUFFER);\r\n  }\r\n}\r\n// end of SensorPath prototype\r\n\r\n\r\n/**\r\n* 打点操作\r\n* 初始化时为顶点申请一定大小的缓冲区，打点的数量有限制，\r\n* 因为在程序运行时不会自动申请缓冲区。\r\n**/\r\nclass RecordPoint extends PaintObj{\r\n  constructor(props) {\r\n    super(props)\r\n    this.type = \"RecordPoint\";\r\n    this.max_vertex = this.sides * 1000;\r\n    this.vertex_count = 0;\r\n    this.index_count = 0;\r\n    this.init();\r\n  }\r\n  \r\n  init () {\r\n    this.buffers.vertex = this.createArrayBuffer(this.max_vertex * 4, states.gl.DYNAMIC_DRAW, states.gl.ARRAY_BUFFER);\r\n    this.buffers.index = this.createArrayBuffer(this.max_vertex * 2, states.gl.DYNAMIC_DRAW, states.gl.ELEMENT_ARRAY_BUFFER);\r\n  }\r\n\r\n  paint () {\r\n    // 进行采点操作\r\n    if (this.vertex_count === 0 || !this.visible) {\r\n      return;\r\n    }\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers.vertex);\r\n    gl.vertexAttribPointer(attributes.vertex_normal, 3, gl.FLOAT, false, 6 * 4, 0);\r\n    gl.vertexAttribPointer(attributes.vertex_position, 3, gl.FLOAT, false, 6 * 4, 0);\r\n    gl.vertexAttribPointer(attributes.color, 3, gl.FLOAT, false, 6 * 4, 3 * 4);\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffers.index);\r\n\r\n    gl.uniform1f(uniforms.alpha, this.alpha);\r\n    gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    gl.drawElements(gl.TRIANGLES, this.index_count, gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onViewChanged (matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setSize (size) {\r\n    this.size = size;\r\n    vec3.fromValues(this.vscale, size, size, size);\r\n    mat4.fromRotationTranslationScale(this.mMatrix, this.quat, this.translation, this.vscale);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  record () {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    console.log(\"[Info]: record a point.\");\r\n\r\n    var i = 0, j = 0;\r\n    var point = [];\r\n    var index = [];\r\n\r\n    point = circleShape(this.size, this.sides, 0, Math.PI * 2);\r\n    rotateVertex(point, this.theta, this.phi, this.dis);\r\n\r\n    var vertices = genVertices(point, [0.0, 0.5, 0.5]);\r\n\r\n    var n = this.vertex_count / 6;\r\n    for (i = 1; i < this.sides; i++) {\r\n      index.push(n, n + i, n + i + 1,\r\n        n, n + i + 1, n + i\r\n      );\r\n    }\r\n    index.push(n, n + this.sides, n + 1,\r\n      n, n + 1, n + this.sides\r\n    );\r\n    this.subBuffer(this.buffers.vertex, this.vertex_count * 4, new Float32Array(vertices));\r\n    this.subBuffer(this.buffers.index, this.index_count * 2, new Uint16Array(index));\r\n\r\n    this.vertex_count += vertices.length;\r\n    this.index_count += index.length;\r\n  }\r\n\r\n  onSphericalChanged (params) {\r\n    this.theta = params.theta;\r\n    this.phi = params.phi;\r\n    this.dis = params.dis * 1.01;\r\n    this.size = params.size * 0.95;\r\n  }\r\n\r\n  // 重置已经打的点\r\n  reset () {\r\n    this.vertex_count = 0;\r\n    this.index_count = 0;\r\n  }\r\n}\r\n// end of RecordPoint prototype\r\n\r\nexport {SensorPoint, SensorPath, RecordPoint};","\r\n\r\n/**\r\n* 飞行器模拟器，模型是从 https://archive3d.net/ 中下载的，\r\n* 模型转换成 OBJ 格式，并利用 [webgl-obj-loader](https://github.com/frenchtoast747/webgl-obj-loader)\r\n* 进行加载\r\n**/\r\nclass Craft {\r\n  constructor(props) {\r\n    PaintObj.call(this);\r\n    this.type = \"Craft\";\r\n    this.url = \"qrc:/res/obj/craft.obj\";\r\n    var scale = props.size || 1;\r\n    this.setScale(scale);\r\n    this.init();\r\n  }\r\n  init() {\r\n    var that = this;\r\n    readFile(this.url, function (text) {\r\n      that.mesh = new ObjLoader.OBJ.Mesh(text);\r\n      ObjLoader.OBJ.initMeshBuffers(gl, that.mesh);\r\n    });\r\n  }\r\n\r\n  paint() {\r\n\r\n    if (this.mesh === undefined || !this.visible) {\r\n      return;\r\n    }\r\n\r\n    gl.uniform1f(uniforms.alpha, this.alpha);\r\n    //        gl.uniform3fv( uniforms.frag_color, [0.8, 0.3, 0.6] );\r\n    //        gl.uniform1i(  uniforms.has_texture, true );\r\n    gl.uniform1i(uniforms.specColor, 1);\r\n    gl.uniform3fv(uniforms.vertexColor, this.color);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.mesh.vertexBuffer);\r\n    gl.vertexAttribPointer(attributes.vertex_position, this.mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\r\n\r\n    //        if(!this.mesh.textures.length){\r\n    //            gl.disableVertexAttribArray(attributes.textureCoordAttribute);\r\n    //        }\r\n    //        else{\r\n    //            // if the texture vertexAttribArray has been previously\r\n    //            // disabled, then it needs to be re-enabled\r\n    //            gl.enableVertexAttribArray( attributes.texture );\r\n    //            gl.bindBuffer( gl.ARRAY_BUFFER, this.mesh.textureBuffer );\r\n    //            gl.vertexAttribPointer( attributes.texture, this.mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\r\n    //        }\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.mesh.normalBuffer);\r\n    gl.vertexAttribPointer(attributes.vertex_normal, this.mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\r\n\r\n    gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.mesh.indexBuffer);\r\n    gl.drawElements(gl.TRIANGLES, this.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\r\n\r\n    //        gl.uniform1i( uniforms.has_texture, false );\r\n    gl.uniform1i(uniforms.specColor, false);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  /**\r\n    * 加载模型不进行旋转操作时，可以看到模型指向 Z 轴负半轴，模型顶部指向 Y 轴\r\n    * 正半轴，因此需要在跟随 SensorPoint 做旋转操作时需要首先调整指向。\r\n    * mat4.rotate 方法会将物体的坐标轴进行旋转，即旋转后物体坐标轴与世界坐标系的轴不同\r\n  **/\r\n  setRotation(params) {\r\n    this.pitch = params.pitch;\r\n    this.heading = params.heading;\r\n    this.roll = params.roll;\r\n    //        quat4.fromEuler( this.quat, params.heading, params.pitch, params.roll );\r\n    mat4.fromScaling(this.mMatrix, this.vscale);\r\n    // if craft's look at [1, 0, 0] and its up is [0, 0, 1]\r\n    // following rotation will be fine, now it needs to some calibrations\r\n    // what's more, the coordinate will rotate with the angle\r\n    //        mat4.rotateZ( this.mMatrix, this.mMatrix, degToRad( params.heading ) );\r\n    //        mat4.rotateY( this.mMatrix, this.mMatrix, degToRad( params.pitch ) );\r\n    //        mat4.rotateX( this.mMatrix, this.mMatrix, degToRad( params.roll ) );\r\n\r\n    mat4.rotateX(this.mMatrix, this.mMatrix, degToRad(90));\r\n    //        mat4.rotateY( this.mMatrix, this.mMatrix, degToRad( 270 ) );\r\n    mat4.rotateY(this.mMatrix, this.mMatrix, degToRad(params.heading + 270));\r\n    mat4.rotateX(this.mMatrix, this.mMatrix, degToRad(params.pitch));\r\n    mat4.rotateZ(this.mMatrix, this.mMatrix, degToRad(params.roll));\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size;\r\n    vec3.set(this.vscale, size, size, size);\r\n    sensorPoint.update();\r\n    //        this.setRotation( {} );\r\n  }\r\n}\r\n\r\nexport {Craft};","import {PaintObj, degToRad, coordCarte, circleShape, genVertices} from './PaintObj'\r\nimport {states, uniforms, attributes} from './Variables'\r\n/**\r\n* Sphere Object\r\n* 绘制参考球。绘制模式有 1. 球面 2. 线条 3.少数线条 等模式\r\n**/\r\nclass Sphere extends PaintObj{\r\n  MODE_SURFACE = 0;\r\n  MODE_LINE = 1;\r\n  MODE_LESSLINE = 2;\r\n\r\n  DEFAULT_RADIUS = 4;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"Sphere\";\r\n    this.vn = props.vn || 48;\r\n    this.hn = (props.hn || 48) * 0.5;\r\n    this.size = props.size || this.DEFAULT_RADIUS; // default radius\r\n    this.drawMode = this.MODE_SURFACE;\r\n    this.line_alpha = 0.65;\r\n    this.alpha = 0.25;\r\n    this.init();\r\n    this.setSize();\r\n  }\r\n\r\n  init() {\r\n    var res = this.getVertex();\r\n    var index = this.getIndex();\r\n\r\n    // vertex info，static_draw is enough for both vertex and index now\r\n    this.vertexBuffer = this.createArrayBuffer(new Float32Array(res.vertices), states.gl.STATIC_DRAW);\r\n    this.indexBuffer = this.createArrayBuffer(new Uint16Array(index.vertex_index), states.gl.STATIC_DRAW);\r\n    this.lineIndexBuffer = this.createArrayBuffer(new Uint16Array(index.line_index), states.gl.STATIC_DRAW);\r\n    this.lessLineIndexBuffer = this.createArrayBuffer(new Uint16Array(index.less_line_index), states.gl.STATIC_DRAW);\r\n    this.lessLSIndexBuffer = this.createArrayBuffer(new Uint16Array(index.less_ls_index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n\r\n  paint() {\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 6 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 6 * 4, 3 * 4);\r\n\r\n    states.gl.uniformMatrix4fv(uniforms.m_matrix, false, this.mMatrix);\r\n    states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.mvpMatrix);\r\n    switch (this.drawMode) {\r\n      case this.MODE_LINE:\r\n        states.gl.uniform1f(uniforms.alpha, this.line_alpha);          //  set alpha value\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lineIndexBuffer);\r\n        states.gl.drawElements(states.gl.LINES, this.lineIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n      case this.MODE_LESSLINE:\r\n        states.gl.uniform1f(uniforms.alpha, this.line_alpha);          //  set alpha value\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lessLineIndexBuffer);\r\n        states.gl.drawElements(states.gl.LINES, this.lessLineIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        // the surface on which equator lies\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.lessLSIndexBuffer);\r\n        states.gl.drawElements(states.gl.TRIANGLES, this.lessLSIndexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n      case this.MODE_SURFACE:\r\n      default:\r\n        states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n        states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        states.gl.drawElements(states.gl.TRIANGLES, this.indexBuffer.numItems, states.gl.UNSIGNED_SHORT, 0);\r\n        break;\r\n    }\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setSize(size) {\r\n    if(size)\r\n      this.size = size;\r\n    else\r\n      this.size = this.DEFAULT_RADIUS;\r\n\r\n    vec3.set(this.vscale, this.size, this.size, this.size);\r\n    mat4.fromScaling(this.mMatrix, this.vscale);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setDrawMode(mode) {\r\n    this.drawMode = mode;\r\n  }\r\n\r\n  setAlpha(alpha) {\r\n    this.alpha = alpha;\r\n  }\r\n\r\n  /**\r\n   * 计算得到球面的所有顶点的位置\r\n   * 先绘制经线，后绘制纬线\r\n   * @returns 返回所有类型的顶点个数\r\n   */\r\n  getVertex() {\r\n    var vertices = [];\r\n    var vertex = [];\r\n    //    var vn = [];        // 顶点法向量数组，当球心在原点时，与顶点坐标相同\r\n    var i, j, k;\r\n\r\n    // i indicates vertical line while j indicates horizontal line,\r\n    // vertical line is half a circle, so the number should be 1 more\r\n    for (j = 0; j <= this.vn; j++) {\r\n      for (i = 0; i <= this.hn; i++) {\r\n        // (n+1)*n points are needed\r\n        k = coordCarte(degToRad(i * 180 / this.hn), degToRad(j * 360 / this.vn), 1);\r\n        vertex = vertex.concat(k[0], k[1], k[2]);\r\n      }\r\n    }\r\n    // add origin point into array\r\n    vertex = vertex.concat([0, 0, 0]);\r\n    vertices = genVertices(vertex, this.color);\r\n\r\n    return {\r\n      \"vertices\": vertices\r\n    }\r\n  }\r\n\r\n  // 获取绘制球面时需要的顶点索引\r\n  getIndex() {\r\n    var vertexIndex = []; // surfaceDrawMode  绘制时所用的索引\r\n    var lineIndex = []; // lineDrawMode     绘制时所用的索引\r\n    var lessLineIndex = []; // lessLineDrawMode 绘制时所用的索引\r\n    var lessLSIndex = [];\r\n    var i = 0, j = 0;\r\n\r\n    for (j = 0; j < this.vn; j++) {  // the last half circle (j = 0) overlaps the first one (j = 0)\r\n      for (i = 0; i < this.hn + 1; i++) {\r\n        // for line mode index\r\n        lineIndex.push(\r\n          i + j * (this.hn + 1),\r\n          i + 1 + j * (this.hn + 1),\r\n          i + j * (this.hn + 1),\r\n          i + (j + 1) * (this.hn + 1)\r\n        );\r\n\r\n        // for surface mode index\r\n        vertexIndex.push(\r\n          i + j * (this.hn + 1),        // 0\r\n          i + 1 + j * (this.hn + 1),      // 1\r\n          i + 1 + (j + 1) * (this.hn + 1)   // n+1\r\n        );\r\n        vertexIndex.push(\r\n          i + j * (this.hn + 1),            // 0\r\n          i + 1 + (j + 1) * (this.hn + 1),      // n+1\r\n          i + (j + 1) * (this.hn + 1)         // n\r\n        );\r\n      }\r\n    }\r\n    for (i = 0; i < this.hn + 1; i++) {\r\n      // 绘出 4 条经线\r\n      j = 0;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.25 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.5 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n      j = 0.75 * this.vn;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + 1 + j * (this.hn + 1));\r\n    }\r\n    for (j = 0; j < this.vn; j++) {\r\n      i = this.hn / 2;\r\n      lessLineIndex.push(i + j * (this.hn + 1), i + (j + 1) * (this.hn + 1)); // equator line\r\n    }\r\n    // 赤道所在平面\r\n    for (j = this.vn * 0.5; j < this.vn * 0.75; j++) {\r\n      // 原点 -- 赤道上的点 -- 赤道上的点\r\n      lessLSIndex.push((this.vn + 1) * (this.hn + 1));   // origin point\r\n      lessLSIndex.push(this.hn * 0.5 + j * (this.hn + 1));\r\n      lessLSIndex.push(this.hn * 0.5 + (j + 1) * (this.hn + 1));\r\n      lessLSIndex.push((this.vn + 1) * (this.hn + 1));   // origin point\r\n      lessLSIndex.push(this.hn * 0.5 + (j + 1) * (this.hn + 1));\r\n      lessLSIndex.push(this.hn * 0.5 + j * (this.hn + 1));\r\n    }\r\n\r\n    //        this.vertex_index = vertexIndex;\r\n    //        this.line_index   = lineIndex;\r\n    //        this.less_line_index = lessLineIndex;\r\n    //        this.less_ls_index   = lessLSIndex;\r\n    return {\r\n      vertex_index: vertexIndex,\r\n      line_index: lineIndex,\r\n      less_line_index: lessLineIndex,\r\n      less_ls_index: lessLSIndex\r\n    }\r\n  }\r\n}\r\n\r\n// end of Sphere prototype\r\n\r\n\r\n/**\r\n* ReferenceCircle Object (球面上的参考圆圈)\r\n* 通过该对象管理分离的 26 个不同的 circle。但为了节省内存占用和\r\n* 减少绑定的缓冲区的次数，实际上只存储了一个 Circle 的 buffer，\r\n* 利用模型变换矩阵绘制出 26 个圆圈。\r\n**/\r\nclass RefCircle extends PaintObj{\r\n  constructor(props) {\r\n    super(props);\r\n    this.dis = props.dis || 4;\r\n    this.visible = false;\r\n    var circles = [];\r\n    var red = [1.0, 0.0, 0.0];\r\n    var green = [0.0, 1.0, 0.0];\r\n    var blue = [0.0, 0.0, 1.0];\r\n    var i = 0, j = 0, k = 0;\r\n    circles[k] = new ReferCircle({ \"pos\": [0, 0, this.dis], color: green, gl: states.gl });\r\n    k++;\r\n    for (i = 0; i <= 2; i++) {\r\n      for (j = 0; j < 8; j++) {\r\n        if (i === 1 && j % 2 === 0) {\r\n          circles[k] = new ReferCircle({ \"pos\": [(i + 1) * 45, j * 45, this.dis], color: green, gl: states.gl });\r\n        }\r\n        else {\r\n          circles[k] = new ReferCircle({ \"pos\": [(i + 1) * 45, j * 45, this.dis], color: blue, gl: states.gl });\r\n        }\r\n        k++;\r\n      }\r\n    }\r\n    circles[k] = new ReferCircle({ \"pos\": [4 * 45, 0, this.dis], color: green, gl: states.gl });\r\n    this.circles = circles;\r\n    this.setScale(props.size || 1);\r\n    this.init();\r\n  }\r\n\r\n  \r\n  init() {\r\n    var initSize = 1;\r\n    var vertex = circleShape(initSize, this.sides, 0, Math.PI * 2);\r\n    var vertices = genVertices(vertex, this.color, vertex);\r\n\r\n    var i = 0;\r\n    var index = [];\r\n    for (i = 1; i < this.sides + 1; i++) {\r\n      index.push(i);\r\n    }\r\n    this.vertexBuffer = this.createArrayBuffer(new Float32Array(vertices), states.gl.STATIC_DRAW);\r\n    this.indexBuffer = this.createArrayBuffer(new Uint16Array(index), states.gl.STATIC_DRAW);\r\n  }\r\n\r\n  paint() {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n    states.gl.uniform1f(uniforms.alpha, this.alpha);\r\n    states.gl.uniform1i(uniforms.specColor, 1);\r\n\r\n    states.gl.bindBuffer(states.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n    states.gl.vertexAttribPointer(attributes.vertex_position, 3, states.gl.FLOAT, false, 9 * 4, 0);\r\n    states.gl.vertexAttribPointer(attributes.vertex_normal, 3, states.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n    states.gl.vertexAttribPointer(attributes.color, 3, states.gl.FLOAT, false, 9 * 4, 6 * 4);\r\n\r\n    states.gl.bindBuffer(states.gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n\r\n    for (var i = 0; i < 26; i++) {\r\n      //            this.circles[i].paint();\r\n      //        states.gl.uniformMatrix4fv( uniforms.m_matrix, false, this.mMatrix );\r\n      states.gl.uniform3fv(uniforms.vertexColor, this.circles[i].color);\r\n      states.gl.uniformMatrix4fv(uniforms.pmv_matrix, false, this.circles[i].mvpMatrix);\r\n      states.gl.drawElements(this.circles[i].drawMode, this.sides, states.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    states.gl.uniform1i(uniforms.specColor, 0);\r\n  }\r\n\r\n  onViewChanged(matrix) {\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].onViewChanged(matrix);\r\n    }\r\n  }\r\n\r\n  setDis(dis) {\r\n    this.dis = dis;\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].setTranslation(this.dis + 0.1);\r\n    }\r\n  }\r\n\r\n  setScale(size) {\r\n    //        this.size = size;\r\n    for (var i = 0; i < 26; i++) {\r\n      this.circles[i].setScale(size);\r\n    }\r\n  }\r\n\r\n  onSphericalChanged(params) {\r\n    for (var i = 0; i < 26; i++) {\r\n      //            this.circles[i].current = false;\r\n      this.circles[i].isCurrent(params);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* 参考圆圈\r\n* 为节省内存和提高性能，该类不再存储圆圈的顶点缓冲区。\r\n* 实际上该类存储的只是每个圆圈的位置等信息。\r\n* 在 SensorPoint 移动时检测 SensorPoint 是否与当前圆圈相近，\r\n* 若距离很近则会改变绘制方式。\r\n**/\r\nclass ReferCircle extends PaintObj{\r\n  constructor(props) {\r\n    super(props);\r\n    this.type = \"RCircle\";\r\n    if (props.pos !== undefined) {\r\n      this.setTranslation(props.pos[2], degToRad(props.pos[0]), degToRad(props.pos[1]));\r\n      this.setQuat(props.pos[0], props.pos[1]);\r\n    }\r\n    this.current = false;\r\n    this.drawMode = states.gl.LINES;\r\n    //    this.init();\r\n  }\r\n  \r\n  onViewChanged(matrix) {\r\n    this.pvMatrix = matrix || this.pvMatrix;\r\n    mat4.fromRotationTranslationScale(this.mMatrix, this.quat, this.translation, this.vscale);\r\n    mat4.mul(this.mvpMatrix, this.pvMatrix, this.mMatrix);\r\n  }\r\n\r\n  setTranslation(r, theta, phi) {\r\n    if (theta !== undefined) {\r\n      this.theta = theta;\r\n    }\r\n\r\n    if (phi !== undefined) {\r\n      this.phi = phi;\r\n    }\r\n\r\n    this.translation = coordCarte(this.theta, this.phi, r);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setQuat(a_theta, a_phi, a_beta) {\r\n    quat.fromEuler(this.quat, 0, a_theta, a_phi);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  setScale(size) {\r\n    this.size = size;\r\n    this.vscale = vec3.fromValues(size, size, size);\r\n    this.onViewChanged();\r\n  }\r\n\r\n  // 判断 Sensor point 是否接近该圆圈。（目前只考虑 theta 和 phi 角而不是计算两个圆心的距离）\r\n  isCurrent(spherical) {\r\n    if (Math.abs(spherical.theta - this.theta) < Math.PI * 0.02\r\n      && Math.abs(spherical.phi - this.phi) < Math.PI * 0.02) {\r\n      this.current = true;\r\n      var size = spherical.size * 1.15;\r\n      vec3.set(this.vscale, size, size, size);\r\n      this.originColor = new Float32Array(this.color);\r\n      this.color = [1.0, 0.0, 0.0];\r\n      this.drawMode = states.gl.LINE_LOOP;\r\n    } else if (this.current) {\r\n      this.current = false;\r\n      vec3.set(this.vscale, this.size, this.size, this.size);\r\n      this.color = this.originColor;\r\n      this.drawMode = states.gl.LINES;\r\n    }\r\n    this.onViewChanged();\r\n  }\r\n}\r\n// end of ReferCircle prototype\r\n\r\nexport {Sphere, RefCircle};","export default \"precision mediump float;\\r\\n\\r\\nattribute vec3 aVertexPosition;\\r\\nattribute vec3 aVertexNormal;\\r\\nattribute vec2 aTexture;\\r\\nattribute vec3 aColor;\\r\\n\\r\\nuniform mat4 uPMVMatrix;\\r\\nuniform mat4 uMMatrix;\\r\\nuniform mat4 uNMatrix;\\r\\nuniform vec3 uVertColor;\\r\\nuniform bool uSpecColor;\\r\\n\\r\\nuniform vec3  uLightDirection; // 直射光的方向\\r\\nvarying vec3  vLight;\\r\\nvarying vec2  vTexture;\\r\\nvarying vec3  vNormal;\\r\\nvarying vec3  vPosition;\\r\\n\\r\\n\\r\\nvoid main(void) {\\r\\n    gl_Position = uPMVMatrix * vec4(aVertexPosition, 1.0);\\r\\n\\r\\n    vec3 normal = normalize( vec3( uNMatrix * vec4( aVertexNormal, 1 ) ) );\\r\\n    vNormal = normal;\\r\\n    vPosition = vec3( uMMatrix * vec4( aVertexPosition , 1.0 ) );\\r\\n\\r\\n//    vec3 ambientLight     = vec3( 0.2, 0.24, 0.21 );\\r\\n//    vec3 directLightColor = vec3( 0.75, 0.75, 0.75 );\\r\\n//    float directional = max( dot( normal, normalize( uLightDirection ) ), 0.0);\\r\\n//    vec3 diffuse = directLightColor * directional;\\r\\n\\r\\n    if( !uSpecColor ) {\\r\\n//        vLight = aColor * (ambientLight + diffuse);\\r\\n        vLight = aColor;\\r\\n    } else {\\r\\n//        vLight = uVertColor * (ambientLight + diffuse);\\r\\n        vLight = uVertColor;\\r\\n    }\\r\\n    vTexture = aTexture;\\r\\n}\\r\\n\"","export default \"precision mediump float;\\r\\n\\r\\nvarying vec3  vLight;\\r\\nvarying vec2  vTexture;\\r\\nvarying vec3  vNormal;\\r\\nvarying vec3  vPosition;\\r\\n\\r\\nuniform float uAlpha;\\r\\nuniform vec3 uFragColor;\\r\\nuniform bool uHasTexture;\\r\\nuniform sampler2D uSampler;\\r\\n\\r\\n// uniform sampler2D uYSampler;\\r\\n// uniform sampler2D uZSampler;\\r\\n// uniform int uEnableTexture;\\r\\nvoid main(void) {\\r\\n    vec3 lightPos = vec3( 10, 10, 10 );\\r\\n    vec3 ambientLight = vec3( 0.28, 0.28, 0.28 );\\r\\n    vec3 directLightColor = vec3( 0.88, 0.88, 0.88 );\\r\\n    float directional = max( dot( normalize( vNormal ), normalize( lightPos - vPosition ) ), 0.0);        // 直接使用顶点的法线数据进行漫反射计算\\r\\n    vec3 diffuse = directLightColor * directional;\\r\\n\\r\\n    if( uHasTexture ) {\\r\\n//        vec4 color = mix( uFragColor, texture2D( uSampler, vec2( vTexture.s, vTexture.t ) ), 0.5 );\\r\\n        gl_FragColor = vec4( uFragColor * (diffuse + ambientLight), uAlpha );\\r\\n    }\\r\\n    else {\\r\\n        gl_FragColor = vec4( vLight * (diffuse + ambientLight), uAlpha );\\r\\n    }\\r\\n//   mediump vec4 xtextureColor = texture2D(uXSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   mediump vec4 ytextureColor = texture2D(uYSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   mediump vec4 ztextureColor = texture2D(uZSampler, vec2(vXTexture.s, vXTexture.t));\\r\\n//   if( uEnableTexture == 0 ) {\\r\\n//     gl_FragColor = vec4(vLight, uAlpha);\\r\\n//   }\\r\\n//   else if( uEnableTexture == 1 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * xtextureColor;\\r\\n//   }\\r\\n//   else if( uEnableTexture == 2 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * ytextureColor;}\\r\\n//   else if( uEnableTexture == 3 ) {\\r\\n//     gl_FragColor = vec4(vLight, 1.0) * ztextureColor;\\r\\n//   }\\r\\n}\\r\\n\"","/**\r\n * Author: BriFuture\r\n * update: 2019/03/27\r\n * Description: [Compass](https://github.com/BriFuture/Compass) 是这个程序的 QML 版本，\r\n * 利用 webpack 的打包功能重写了核心的 JS 绘图程序。\r\n * \r\n * License: GPLv3\r\n * Note: 默认 glMatrix 已加载，并且 mat4, vec3 可以直接使用，否则程序运行会出错\r\n */\r\nexport const version = \"0.0.01\";\r\n\r\nimport {states} from './Variables'\r\n//var nMatrix   = mat4.create();\r\nimport Coord from './Coord'\r\nimport { Camera, Scene } from './Scene'\r\nimport { SensorPoint, SensorPath, RecordPoint } from './SensorPoint'\r\nimport { Craft } from './Craft'\r\nimport {Sphere, RefCircle} from './Sphere'\r\n// const fs = require('fs')\r\n\r\nimport vertexCode from '!raw-loader!../assets/SPVertexCode.vsh'\r\nimport fragCode from '!raw-loader!../assets/SPFragCode.fsh'\r\nvar canvasArgs; // 相关绘图变量\r\n\r\nexport class SpacePath {\r\n  constructor() {\r\n    // var gl2d;  // this is used for HUD drawing\r\n    // return;\r\n  }\r\n\r\n  // initializeGL(canvas, args) {\r\n  //   gl = canvas.getContext(\"canvas3d\",\r\n  //     { depth: true, antilias: true }\r\n  //   );\r\n  //   gl2d = canvas.getContext(\"2d\");\r\n\r\n  //   this.init();\r\n  // }\r\n\r\n  init(canvas, context) {\r\n    if(!context) {\r\n      context = 'webgl'\r\n    }\r\n    states.gl  = canvas.getContext(context,\r\n      { depth: true, antilias: true }\r\n    );\r\n    var scene = new Scene({});\r\n    this.scene = scene;\r\n    scene.initShaders(vertexCode, fragCode)\r\n    this.camera = new Camera({height: 600, width: 800});\r\n    scene.addCamera(this.camera)\r\n    \r\n    this.coord = new Coord({});\r\n    scene.add(this.coord);\r\n    \r\n    var sensorPoint = new SensorPoint({ \r\n      color: [1.0, 0.2, 0.1],\r\n      size: 0.4\r\n    });\r\n    // 调整初始位置\r\n    sensorPoint.setParam({ dis: 4, pitch: 0, roll: 0, heading: 0 });\r\n    // sensorPoint.setParam({dis: 3, pitch: 0, heading: 0});\r\n    this.sensorPoint = sensorPoint;\r\n    var sensorPath = new SensorPath({color: [0.9, 0.5, 0.2] });\r\n    this.sensorPath = sensorPath;\r\n\r\n    this.sphere = new Sphere({\r\n      color: [0.95, 0.2, 0.2],\r\n      vn: 48,\r\n      hn: 48\r\n    });\r\n\r\n    var recordPoint = new RecordPoint({});\r\n    this.recordPoint = recordPoint;\r\n    var refCircle = new RefCircle({});\r\n    this.refCircle = refCircle;\r\n\r\n    /** 开始执行实际的绘图操作，由于开启了 ALPHA BLEND 功能，先绘制球内物体 **/\r\n    scene.add(this.sensorPoint);\r\n    scene.add(this.sensorPath);\r\n    scene.add(this.recordPoint);\r\n    scene.add(this.refCircle);\r\n    scene.add(this.sphere);\r\n    \r\n    sensorPoint.addParamCallback(function( params ) {\r\n      sensorPath.onSphericalChanged( params );\r\n      recordPoint.onSphericalChanged(params);\r\n      refCircle.onSphericalChanged( params );\r\n      // craft.setRotation( params );\r\n    });\r\n    // this.craft = craft;\r\n    scene.render()\r\n  }\r\n\r\n  reset() {\r\n    sensorPoint.reset();\r\n    sensorPath.resetAllPath();\r\n    camera.reset();\r\n  }\r\n\r\n  addRefCircle(props) {\r\n    if (refCircle === undefined) {\r\n      refCircle = new RefCircle(props);\r\n      sensorPoint.addParamCallback(function (params) {\r\n        refCircle.onSphericalChanged(params);\r\n      });\r\n      sensorPoint.update();\r\n      scene.add(refCircle, true);\r\n    }\r\n  }\r\n\r\n  addCraft(props) {\r\n    if (craft === undefined) {\r\n      craft = new Craft(props);\r\n      sensorPoint.addParamCallback(function (params) {\r\n        craft.setRotation(params);\r\n      });\r\n      sensorPoint.update();\r\n      scene.add(craft, true);\r\n    }\r\n  }\r\n\r\n  paintGL(canvas) {\r\n    var pixelRatio = canvas.devicePixelRatio;\r\n    var currentWidth = canvas.width * pixelRatio;\r\n    var currentHeight = canvas.height * pixelRatio;\r\n\r\n    if (currentWidth !== camera.width || currentHeight !== camera.height) {\r\n      camera.setSize(currentWidth, currentHeight);\r\n    }\r\n    scene.render();\r\n  }\r\n\r\n  resizeGL(canvas) {\r\n    var pixelRatio = canvas.devicePixelRatio;\r\n    canvas.pixelSize = Qt.size(canvas.width * pixelRatio, canvas.height * pixelRatio);\r\n  }\r\n}\r\n\r\n\r\n/** Test: to watch variables change **/\r\nclass Test {\r\n  constructor() {\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._z = 0;\r\n  }\r\n}\r\n\r\n/**\r\n* this function is copied from planets demo of qt version of threejs\r\n* I modified some of it, now it works fine for me\r\n**/\r\nfunction readFile(url, onLoad, onProgress, onError) {\r\n  var request = new XMLHttpRequest();\r\n\r\n  request.onreadystatechange = function () {\r\n    if (request.readyState === XMLHttpRequest.DONE) {\r\n      // TODO: Re-visit https://bugreports.qt.io/browse/QTBUG-45581 is solved in Qt\r\n      if (request.status == 200 || request.status == 0) {\r\n        //                var response;\r\n        // TODO: Remove once https://bugreports.qt.io/browse/QTBUG-45862 is fixed in Qt\r\n        //                response = request.responseText;\r\n\r\n        console.time('Process file: \"' + url + '\"');\r\n        onLoad(request.responseText);\r\n        console.timeEnd('Process file: \"' + url + '\"');\r\n\r\n      }\r\n      //              else if ( onError !== undefined ) {\r\n      //                onError();\r\n      //            }\r\n    }\r\n    //        else if (request.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n    //            if ( onProgress !== undefined ) {\r\n    //                onProgress();\r\n    //            }\r\n    //        }\r\n  };\r\n\r\n  request.open('GET', url, true);\r\n  request.send(null);\r\n}\r\nwindow.SpacePath = SpacePath;\r\nexport default { SpacePath }","<template>\r\n  <b-container fluid id=\"app\">\r\n    <!-- <script type=\"text/javascript\" src=\"@/components/gl-matrix-min.js\"></script> -->\r\n    <b-row>\r\n      <b-col cols=\"2\" class=\"\">\r\n        <c-sidebar ref=\"sidebar\"\r\n        ></c-sidebar>\r\n      </b-col>\r\n      <b-col cols=\"10\">\r\n        <canvas ref=\"canvas\" width=\"800\" height=\"600\"></canvas>\r\n        <div class=\"float-right\">\r\n          <c-debug-panel @valueChanged=\"debugValueChanged($event)\"></c-debug-panel>\r\n          <c-information></c-information>\r\n        </div>\r\n      </b-col>\r\n    </b-row>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport CSidebar from './components/Sidebar.vue'\r\nimport CInformation from './components/Information.vue'\r\nimport CDebugPanel from './components/DebugPanel.vue'\r\nimport {SpacePath} from './compass/SpacePath'\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    CSidebar,\r\n    CInformation,\r\n    CDebugPanel\r\n  },\r\n  data() {\r\n    return {\r\n    }\r\n  },\r\n  created() {\r\n    // console.log(this.$refs)\r\n    // this.sp = new SpacePath()\r\n  },\r\n  mounted() {\r\n    console.log(\"Mounted\")\r\n    this.spacepath = new SpacePath();\r\n    this.spacepath.init(this.$refs.canvas);\r\n    this.$refs.sidebar.init(this.spacepath);\r\n  },\r\n  methods: {\r\n    debugValueChanged(event) {\r\n      if(event.key == \"heading\") {\r\n        this.spacepath.sensorPoint.setParam({heading: parseFloat(event.value)})\r\n      } else if(event.key == \"pitch\") {\r\n        this.spacepath.sensorPoint.setParam({pitch: parseFloat(event.value)})\r\n      } else if(event.key == \"roll\") {\r\n        this.spacepath.sensorPoint.setParam({roll: parseFloat(event.value)})\r\n      }\r\n      // console.log(event);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=563f0be8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport BootstrapVue from 'bootstrap-vue'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\r\n\r\nVue.use(BootstrapVue)\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n"],"sourceRoot":""}