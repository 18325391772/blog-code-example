(function(t){function e(e){for(var r,s,h=e[0],o=e[1],l=e[2],u=0,f=[];u<h.length;u++)s=h[u],a[s]&&f.push(a[s][0]),a[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);c&&c(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],r=!0,h=1;h<i.length;h++){var o=i[h];0!==a[o]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},a={index:0},n=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],o=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var c=o;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var r=i("64a9"),a=i.n(r);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var r=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",{attrs:{fluid:"",id:"app"}},[i("b-row",[i("b-col",{attrs:{cols:"2"}},[i("c-sidebar",{attrs:{camera:t.camera}}),i("c-information")],1),i("b-col",{attrs:{cols:"10"}},[i("canvas",{ref:"canvas",attrs:{width:"800",height:"600"}})]),i("b-col",{attrs:{cols:"3"}},[i("c-debug-panel",{on:{valueChanged:function(e){return t.debugValueChanged(e)}}})],1)],1)],1)},n=[],s=i("59ad"),h=i.n(s),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"camera"},[i("div",[t._v("摄像机θ角(与Z轴正半轴夹角)\r\n      "),i("b-form-input",{attrs:{type:"range",id:"cameraTheta",min:"0",max:"180"},on:{change:t.cameraThetaChanged},model:{value:t.cameraTheta,callback:function(e){t.cameraTheta=e},expression:"cameraTheta"}})],1),i("div",[t._v("摄像机φ角(与X轴正半轴夹角)\r\n      "),i("b-form-input",{attrs:{type:"range",id:"cameraPhi",min:"0",max:"360"},on:{change:t.cameraPhiChanged},model:{value:t.cameraPhi,callback:function(e){t.cameraPhi=e},expression:"cameraPhi"}})],1),i("div",[t._v("摄像机距原点\r\n      "),i("b-form-input",{attrs:{type:"range",id:"cameraDis",min:"1",max:"180"},on:{change:t.cameraDisChanged},model:{value:t.cameraDis,callback:function(e){t.cameraDis=e},expression:"cameraDis"}})],1)]),t._m(0),t._m(1),t._m(2),t._m(3)])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"params"},[i("div",[t._v("参考球半径")]),i("div",[t._v("球面透明度")]),i("div",[t._v("指示器大小")]),i("div",[t._v("轨迹宽度")]),i("div",[t._v("模拟器大小")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sphereMode"},[i("div",[t._v("Line")]),i("div",[t._v("Surface")]),i("div",[t._v("lessLine")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option"},[i("div",[t._v("绘制路径")]),i("div",[t._v("绘制模拟器")]),i("div",[t._v("球坐标系")]),i("div",[t._v("显示修正圆圈")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"action"},[i("div",[t._v("重置摄像机")]),i("div",[t._v("重置路径")]),i("div",[t._v("打点")]),i("div",[t._v("重置打点")])])}],c={props:{camera:Object},data:function(){return{cameraTheta:0,cameraPhi:0,cameraDis:0}},methods:{cameraPhiChanged:function(){this.camera.rotate(null,this.cameraPhi,null)},cameraThetaChanged:function(){this.camera.rotate(this.cameraTheta,null,null)},cameraDisChanged:function(){this.camera.rotate(null,null,this.cameraDis)}}},u=c,f=i("2877"),v=Object(f["a"])(u,o,l,!1,null,null,null),d=v.exports,g=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v("Picth")]),i("div",[t._v("Roll")]),i("div",[t._v("Heading")])])}],p={},x=p,_=Object(f["a"])(x,g,m,!1,null,null,null),b=_.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v("Heading\n    "),i("b-form-input",{attrs:{type:"range",id:"heading",min:"0",max:"360"},on:{change:function(e){return t.$emit("valueChanged",{key:"heading",value:t.heading})}},model:{value:t.heading,callback:function(e){t.heading=e},expression:"heading"}})],1),i("div",[t._v("Picth\n    "),i("b-form-input",{attrs:{type:"range",id:"pitch",min:"-90",max:"90"},on:{change:function(e){return t.$emit("valueChanged",{key:"pitch",value:t.pitch})}},model:{value:t.pitch,callback:function(e){t.pitch=e},expression:"pitch"}})],1),i("div",[t._v("Roll\n    "),i("b-form-input",{attrs:{type:"range",id:"roll",min:"0",max:"180"},on:{change:function(e){return t.$emit("valueChanged",{key:"roll",value:t.roll})}},model:{value:t.roll,callback:function(e){t.roll=e},expression:"roll"}})],1)])},M=[],y={data:function(){return{heading:0,pitch:0,roll:0}}},E=y,R=Object(f["a"])(E,A,M,!1,null,null,null),C=R.exports,S=i("d225"),P=i("b0b4"),T={gl:"not initialized"},L={},B={},F=(i("af56"),i("63d9"),i("308d")),O=i("6bb5"),w=i("4e2b"),k=function(){function t(e){Object(S["a"])(this,t),void 0===e&&(e={}),this.sides=e.sides||24,this.alpha=e.alpha||1,this.color=e.color||[.8,.8,.8],this.size=e.size||1,this.gl=e.gl,this.buffers={},this.mMatrix=mat4.create(),this.pvMatrix=mat4.create(),this.mvpMatrix=mat4.create(),this.quat=quat.create(),this.vscale=vec3.fromValues(1,1,1),this.translation=vec3.create(),this.visible=!0,this._x=0,this._y=0,this._z=0,this._rotateX=0,this._rotateY=0,this._rotateZ=0}return Object(P["a"])(t,[{key:"createArrayBuffer",value:function(t,e,i){var r=T.gl.createBuffer();return void 0===i&&(i=T.gl.ELEMENT_ARRAY_BUFFER,r.itemSize=t.itemSize||1,t instanceof Float32Array&&(i=T.gl.ARRAY_BUFFER,r.itemSize=t.itemSize||3),r.numItems=t.length/r.itemSize),T.gl.bindBuffer(i,r),T.gl.bufferData(i,t,e),T.gl.bindBuffer(i,null),r}},{key:"subBuffer",value:function(t,e,i){var r=T.gl.ELEMENT_ARRAY_BUFFER;i instanceof Float32Array&&(r=T.gl.ARRAY_BUFFER),T.gl.bindBuffer(r,t),T.gl.bufferSubData(r,e,i)}}]),t}();function I(t,e,i){var r=N(t,e),a=N(t,e,0,2*Math.PI,i),n=r.concat(a),s=[],h=0;for(h=1;h<e;h++)s.push(0,h+1,h);for(s.push(0,1,h),h=e+2;h<2*e+1;h++)s.push(e+1,h,h+1);for(s.push(e+1,h,e+2),h=1;h<e;h++)s.push(e+1+h,h,h+1),s.push(e+h+1,h+1,e+h+2);return s.push(e+1+h,h,1),s.push(e+h+1,1,e+2),{vertex:n,index:s}}function N(t,e,i,r,a){var n=[],s=0,h=0,o=a||0,l=i||0,c=r||2*Math.PI,u=(c-l)/e;n=n.concat([s,h,0]);for(var f=0;f<e;f++)s=Math.cos(f*u+l)*t,h=Math.sin(f*u+l)*t,n=n.concat([s,h,o]);return n}function j(t,e,i,r){for(var a=vec3.create(),n=r||0,s=0;s<t.length;s+=3)vec3.set(a,t[s+0],t[s+1],t[s+2]+n),vec3.rotateY(a,a,[0,0,0],e),vec3.rotateZ(a,a,[0,0,0],i),t[s+0]=a[0],t[s+1]=a[1],t[s+2]=a[2]}function D(t){return t*Math.PI/180}function U(t,e,i){var r=[],a=0;if(e.length<=3)if(void 0===i)for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[0],e[1],e[2]);else if(i.length<=3)for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[0],e[1],e[2]),r=r.concat(i[0],i[1],i[2]);else for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[0],e[1],e[2]),r=r.concat(i[a],i[a+1],i[a+2]);else if(void 0===i)for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[a],e[a+1],e[a+2]);else if(i.length<=3)for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[a],e[a+1],e[a+2]),r=r.concat(i[0],i[1],i[2]);else for(a=0;a<t.length;a+=3)r=r.concat(t[a],t[a+1],t[a+2]),r=r.concat(e[a],e[a+1],e[a+2]),r=r.concat(i[a],i[a+1],i[a+2]);return r}function z(t,e,i){var r=Math.sin(t),a=Math.cos(t),n=Math.sin(e),s=Math.cos(e),h=i*r*s,o=i*r*n,l=i*a;return vec3.fromValues(h,o,l)}var V=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.type="Coord",i.length=10,i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){var t=I(.01,this.sides,this.length);j(t.vertex,D(90),0);var e=U(t.vertex,[.9,.1,0],[1,1,1]),i=I(.01,this.sides,this.length);j(i.vertex,D(90),D(90));var r=U(i.vertex,[0,.9,0],[1,1,1]),a=I(.01,this.sides,this.length),n=U(a.vertex,[0,0,.9],[1,1,1]),s=[];s=s.concat(e),s=s.concat(r),s=s.concat(n);var h=[];h=h.concat(t.index);for(var o=2*this.sides+2,l=0;l<i.index.length;l++)h.push(o+i.index[l]);o=4*this.sides+4;for(l=0;l<a.index.length;l++)h.push(o+a.index[l]);this.buffers.vertex=this.createArrayBuffer(new Float32Array(s),T.gl.STATIC_DRAW),this.buffers.index=this.createArrayBuffer(new Uint16Array(h),T.gl.STATIC_DRAW),this.buffers.index.numItems=h.length}},{key:"paint",value:function(){T.gl.uniform1f(B.alpha,this.alpha),T.gl.uniformMatrix4fv(B.m_matrix,!1,this.mMatrix),T.gl.uniformMatrix4fv(B.pmv_matrix,!1,this.mvpMatrix),T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.buffers.vertex),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,36,0),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,36,12),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,36,24),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.buffers.index),T.gl.drawElements(T.gl.TRIANGLES,this.buffers.index.numItems,T.gl.UNSIGNED_SHORT,0)}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}}]),e}(k),Y=V,G=function(){function t(e){Object(S["a"])(this,t),this.defaultTheta=45,this.defaultPhi=45,this.defaultDis=15,this.defaultViewWidth=800,this.defaultViewHeight=600,this.type="Camera",this.theta=e.theta||this.defaultTheta,this.theta=D(this.theta),this.phi=e.phi||this.defaultPhi,this.phi=D(this.phi),this.dis=e.dis||this.defaultDis,this.width=e.width||this.defaultViewWidth,this.height=e.height||this.defaultViewHeight,this.pos=z(this.theta,this.phi,this.dis),this.up=vec3.fromValues(0,0,1),this.lookat=vec3.fromValues(0,0,0),this.pMatrix=mat4.create(),this.vMatrix=mat4.create(),this.pvMatrix=mat4.create(),this.setSize(this.width,this.height)}return Object(P["a"])(t,[{key:"update",value:function(){mat4.lookAt(this.vMatrix,this.pos,this.lookat,this.up),mat4.mul(this.pvMatrix,this.pMatrix,this.vMatrix),void 0!==this.watcher&&this.watcher(this.pvMatrix)}},{key:"recv",value:function(t){this.watcher=t}},{key:"rotate",value:function(t,e,i){t&&(t<.01?t=.01:t>179.99&&(t=179.99),this.theta=D(t)),e&&(this.phi=D(e)),i&&(this.dis=i),this.pos=z(this.theta,this.phi,this.dis),this.update()}},{key:"setSize",value:function(t,e){this.width=t,this.height=e,T.gl.viewport(0,0,t,e),mat4.perspective(this.pMatrix,.25*Math.PI,t/e,.5,500),this.update()}},{key:"reset",value:function(){this.rotate(this.defaultTheta,this.defaultPhi,this.dis),this.update()}}]),t}(),H=function(){function t(e){Object(S["a"])(this,t);var i=T.gl;i.enable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.enable(i.CULL_FACE),i.cullFace(i.BACK),i.clearColor(.97,.97,.97,1),i.clearDepth(1),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),this.type="Scene",this.objs=[],this.light_direct=[.35,.35,.7]}return Object(P["a"])(t,[{key:"add",value:function(t,e){void 0!==t?(e?this.objs.unshift(t):this.objs.push(t),void 0!==this.camera&&this.camera.update()):console.log("[Warn] Undefined on Scene adding.")}},{key:"addCamera",value:function(t){var e=this;this.camera=t,t.recv(function(t){for(var i=0;i<e.objs.length;i++)e.objs[i].onViewChanged(t)})}},{key:"render",value:function(){this.running=!0;var t=this;function e(){T.gl.clear(T.gl.COLOR_BUFFER_BIT|T.gl.DEPTH_BUFFER_BIT);for(var i=0;i<t.objs.length;i++)t.objs[i].paint();t.running&&requestAnimationFrame(e)}requestAnimationFrame(e)}},{key:"getShader",value:function(t,e,i){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log("JS:Shader compile failed"),console.log(t.getShaderInfoLog(r)),null)}},{key:"initShaders",value:function(t,e){var i=T.gl.createProgram(),r=this.getShader(T.gl,t,T.gl.VERTEX_SHADER);T.gl.attachShader(i,r);var a=this.getShader(T.gl,e,T.gl.FRAGMENT_SHADER);T.gl.attachShader(i,a),this._onShaderReady(i)}},{key:"_onShaderReady",value:function(t){T.gl.linkProgram(t),T.gl.useProgram(t),L.vertex_position=T.gl.getAttribLocation(t,"aVertexPosition"),T.gl.enableVertexAttribArray(L.vertex_position),L.vertex_normal=T.gl.getAttribLocation(t,"aVertexNormal"),T.gl.enableVertexAttribArray(L.vertex_normal),L.color=T.gl.getAttribLocation(t,"aColor"),T.gl.enableVertexAttribArray(L.color),L.texture=T.gl.getAttribLocation(t,"aTexture"),L.color=T.gl.getAttribLocation(t,"aColor"),B.pmv_matrix=T.gl.getUniformLocation(t,"uPMVMatrix"),B.m_matrix=T.gl.getUniformLocation(t,"uMMatrix"),B.n_matrix=T.gl.getUniformLocation(t,"uNMatrix"),B.alpha=T.gl.getUniformLocation(t,"uAlpha"),B.frag_color=T.gl.getUniformLocation(t,"uFragColor"),B.has_texture=T.gl.getUniformLocation(t,"uHasTexture"),B.light_direction=T.gl.getUniformLocation(t,"uLightDirection"),B.specColor=T.gl.getUniformLocation(t,"uSpecColor"),B.vertexColor=T.gl.getUniformLocation(t,"uVertColor"),T.gl.uniformMatrix4fv(B.n_matrix,!1,mat4.create()),T.gl.uniform3fv(B.light_direction,this.light_direct)}}]),t}(),W=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.type="SensorPoint",i.inv_color=t.inv_color||[0,1,0],i.dis=4,i.pitch=0,i.heading=0,i.headingOffset=0,i.roll=0,i.callbacks=[],i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){var t=I(this.size,this.sides,.01),e=t.vertex,i=t.index,r=0,a=[];for(r=0;r<=this.sides;r++)a=a.concat(this.inv_color);for(r=0;r<=this.sides;r++)a=a.concat(this.color);var n=U(e,a,[0,1,1]);this.index_count=i.length,this.buffers.vertex=this.createArrayBuffer(new Float32Array(n),T.gl.STATIC_DRAW),this.buffers.index=this.createArrayBuffer(new Uint16Array(i),T.gl.STATIC_DRAW)}},{key:"paint",value:function(){T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.buffers.vertex),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,36,0),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,36,12),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,36,24),T.gl.uniform1f(B.alpha,this.alpha),T.gl.uniformMatrix4fv(B.m_matrix,!1,this.mMatrix),T.gl.uniformMatrix4fv(B.pmv_matrix,!1,this.mvpMatrix),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.buffers.index),T.gl.drawElements(T.gl.TRIANGLES,this.index_count,T.gl.UNSIGNED_SHORT,0)}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"setScale",value:function(t){this.size=t,vec3.set(this.vscale,t,t,t),this.update()}},{key:"setTranslation",value:function(t,e,i){this.translation=z(D(e),D(i),t),quat.fromEuler(this.quat,0,e,i),this.update()}},{key:"setParam",value:function(t){this.dis=t.dis||this.dis,t.pitch&&(this.pitch=t.pitch),t.heading&&(this.heading=t.heading,t.heading=t.heading-this.headingOffset),t.roll&&(this.roll=t.roll);var e=90-this.pitch;this.setTranslation(this.dis,e,this.heading)}},{key:"update",value:function(){mat4.fromRotationTranslationScale(this.mMatrix,this.quat,this.translation,this.vscale),this.onViewChanged();for(var t=this.spherical(),e=0;e<this.callbacks.length;e++)this.callbacks[e]({dis:this.dis,pitch:this.pitch,heading:this.heading,roll:this.roll,theta:t[0],phi:t[1],size:this.size})}},{key:"addParamCallback",value:function(t){this.callbacks.push(t)}},{key:"spherical",value:function(){var t=(90-this.pitch)/180*Math.PI,e=this.heading/180*Math.PI;return vec3.fromValues(t,e,this.dis)}},{key:"reset",value:function(){this.headingOffset+=this.heading,this.setParam({pitch:this.pitch,heading:this.heading,roll:this.roll,dis:this.dis})}}]),e}(k),$=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.MaxPathNum=57600,i.type="SensorPath",i.all_index_count=0,i.cur_path_count=0,i.cur_index_count=0,i.cur_pi=0,i.buffer_path_bytes=4*i.MaxPathNum,i.buffer_index_bytes=2*i.MaxPathNum,i.gap=1,i.pg=1,i.width=1,i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){this.angle=this.last_point,this.path=[],this.index=[],this.buffers.path=[],this.buffers.index=[],this.createBuffer()}},{key:"paint",value:function(){if(this.visible){T.gl.uniform1f(B.alpha,this.alpha),T.gl.uniformMatrix4fv(B.m_matrix,!1,this.mMatrix),T.gl.uniformMatrix4fv(B.pmv_matrix,!1,this.mvpMatrix);for(var t=0;t<this.cur_pi;t++)T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.buffers.path[t]),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,24,12),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.buffers.index[t]),T.gl.drawElements(T.gl.TRIANGLES,this.MaxPathNum,T.gl.UNSIGNED_SHORT,0);this.cur_index_count>0&&(T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.buffers.path[this.cur_pi]),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,24,12),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.buffers.index[this.cur_pi]),T.gl.drawElements(T.gl.TRIANGLES,this.cur_index_count,T.gl.UNSIGNED_SHORT,0))}}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"updateBuffer",value:function(t){var e=[this.last_point.theta,this.last_point.phi,this.last_point.dis],i=this.getLinearPoint(t,e);this.all_index_count+=i.index.length,this.subBuffer(this.buffers.path[this.cur_pi],4*this.cur_path_count,new Float32Array(i.vertices)),this.subBuffer(this.buffers.index[this.cur_pi],2*this.cur_index_count,new Uint16Array(i.index)),this.cur_path_count+=i.vertices.length,this.cur_index_count+=i.index.length,this.cur_index_count>=this.MaxPathNum&&(this.cur_pi++,console.log("Info: [Path] create a new buffer!\n"),this.createBuffer(),this.resetCurrentPath())}},{key:"setGap",value:function(t){this.gap=t}},{key:"setSize",value:function(t){this.size=t}},{key:"getLinearPoint",value:function(t,e){var i,r=z(t[0],t[1],t[2]),a=z(e[0],e[1],e[2]),n=[r[0]-a[0],r[1]-a[1],r[2]-a[2]],s=z(.5*(t[0]+e[0]),.5*(t[1]+e[1]),t[2]),h=vec3.create();vec3.cross(h,n,s),vec3.normalize(h,h),vec3.scale(h,h,.02*this.size);var o=[],l=this,c=function(){o=o.concat(i),o=o.concat(l.color)};i=[r[0]-h[0],r[1]-h[1],r[2]-h[2]],c(),i=[r[0]+h[0],r[1]+h[1],r[2]+h[2]],c(),i=[a[0]-h[0],a[1]-h[1],a[2]-h[2]],c(),i=[a[0]+h[0],a[1]+h[1],a[2]+h[2]],c();var u=[],f=6,v=this.cur_path_count/f;return u.push(v+0,v+2,v+3,v+0,v+3,v+1),u.push(v+0,v+3,v+2,v+0,v+1,v+3),{vertices:o,index:u}}},{key:"onSphericalChanged",value:function(t){void 0===this.last_point&&(this.last_point=t);var e=z(this.last_point.theta,this.last_point.phi,this.last_point.dis),i=z(t.theta,t.phi,t.dis),r=vec3.dist(e,i),a=[t.theta,t.phi,t.dis];r>Math.PI*t.dis*.002&&(this.updateBuffer(a),this.angle=a,this.last_point=t)}},{key:"resetCurrentPath",value:function(t){this.cur_path_count=0,this.cur_index_count=0,this.pg=0}},{key:"resetAllPath",value:function(t){for(var e=1;e<=this.cur_pi;e++)gl.deleteBuffer(this.buffers.path[e]),gl.deleteBuffer(this.buffers.index[e]);this.all_index_count=0,this.cur_pi=0,this.last_point=void 0,this.resetCurrentPath()}},{key:"createBuffer",value:function(){this.buffers.path[this.cur_pi]=this.createArrayBuffer(this.buffer_path_bytes,T.gl.DYNAMIC_DRAW,T.gl.ARRAY_BUFFER),this.buffers.index[this.cur_pi]=this.createArrayBuffer(this.buffer_index_bytes,T.gl.DYNAMIC_DRAW,T.gl.ELEMENT_ARRAY_BUFFER)}}]),e}(k),q=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.type="RecordPoint",i.max_vertex=1e3*i.sides,i.vertex_count=0,i.index_count=0,i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){this.buffers.vertex=this.createArrayBuffer(4*this.max_vertex,T.gl.DYNAMIC_DRAW,T.gl.ARRAY_BUFFER),this.buffers.index=this.createArrayBuffer(2*this.max_vertex,T.gl.DYNAMIC_DRAW,T.gl.ELEMENT_ARRAY_BUFFER)}},{key:"paint",value:function(){0!==this.vertex_count&&this.visible&&(gl.bindBuffer(gl.ARRAY_BUFFER,this.buffers.vertex),gl.vertexAttribPointer(L.vertex_normal,3,gl.FLOAT,!1,24,0),gl.vertexAttribPointer(L.vertex_position,3,gl.FLOAT,!1,24,0),gl.vertexAttribPointer(L.color,3,gl.FLOAT,!1,24,12),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.buffers.index),gl.uniform1f(B.alpha,this.alpha),gl.uniformMatrix4fv(B.m_matrix,!1,this.mMatrix),gl.uniformMatrix4fv(B.pmv_matrix,!1,this.mvpMatrix),gl.drawElements(gl.TRIANGLES,this.index_count,gl.UNSIGNED_SHORT,0))}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"setSize",value:function(t){this.size=t,vec3.fromValues(this.vscale,t,t,t),mat4.fromRotationTranslationScale(this.mMatrix,this.quat,this.translation,this.vscale),this.onViewChanged()}},{key:"record",value:function(){if(this.visible){console.log("[Info]: record a point.");var t=0,e=[],i=[];e=circleShape(this.size,this.sides,0,2*Math.PI),rotateVertex(e,this.theta,this.phi,this.dis);var r=U(e,[0,.5,.5]),a=this.vertex_count/6;for(t=1;t<this.sides;t++)i.push(a,a+t,a+t+1,a,a+t+1,a+t);i.push(a,a+this.sides,a+1,a,a+1,a+this.sides),this.subBuffer(this.buffers.vertex,4*this.vertex_count,new Float32Array(r)),this.subBuffer(this.buffers.index,2*this.index_count,new Uint16Array(i)),this.vertex_count+=r.length,this.index_count+=i.length}}},{key:"onSphericalChanged",value:function(t){this.theta=t.theta,this.phi=t.phi,this.dis=1.01*t.dis,this.size=.95*t.size}},{key:"reset",value:function(){this.vertex_count=0,this.index_count=0}}]),e}(k),X=function(){function t(e){Object(S["a"])(this,t),PaintObj.call(this),this.type="Craft",this.url="qrc:/res/obj/craft.obj";var i=e.size||1;this.setScale(i),this.init()}return Object(P["a"])(t,[{key:"init",value:function(){var t=this;readFile(this.url,function(e){t.mesh=new ObjLoader.OBJ.Mesh(e),ObjLoader.OBJ.initMeshBuffers(gl,t.mesh)})}},{key:"paint",value:function(){void 0!==this.mesh&&this.visible&&(gl.uniform1f(uniforms.alpha,this.alpha),gl.uniform1i(uniforms.specColor,1),gl.uniform3fv(uniforms.vertexColor,this.color),gl.bindBuffer(gl.ARRAY_BUFFER,this.mesh.vertexBuffer),gl.vertexAttribPointer(attributes.vertex_position,this.mesh.vertexBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.mesh.normalBuffer),gl.vertexAttribPointer(attributes.vertex_normal,this.mesh.normalBuffer.itemSize,gl.FLOAT,!1,0,0),gl.uniformMatrix4fv(uniforms.m_matrix,!1,this.mMatrix),gl.uniformMatrix4fv(uniforms.pmv_matrix,!1,this.mvpMatrix),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.mesh.indexBuffer),gl.drawElements(gl.TRIANGLES,this.mesh.indexBuffer.numItems,gl.UNSIGNED_SHORT,0),gl.uniform1i(uniforms.specColor,!1))}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"setRotation",value:function(t){this.pitch=t.pitch,this.heading=t.heading,this.roll=t.roll,mat4.fromScaling(this.mMatrix,this.vscale),mat4.rotateX(this.mMatrix,this.mMatrix,degToRad(90)),mat4.rotateY(this.mMatrix,this.mMatrix,degToRad(t.heading+270)),mat4.rotateX(this.mMatrix,this.mMatrix,degToRad(t.pitch)),mat4.rotateZ(this.mMatrix,this.mMatrix,degToRad(t.roll)),this.onViewChanged()}},{key:"setScale",value:function(t){this.size=t,vec3.set(this.vscale,t,t,t),sensorPoint.update()}}]),t}(),Z=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.type="Sphere",i.vn=t.vn||48,i.hn=.5*(t.hn||48),i.ratio=.25,i.size=4,i.drawMode=e.MODE_SURFACE,i.line_alpha=.65,i.alpha=.25,i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){var t=this.getVertex(),e=this.getIndex();this.vertexBuffer=this.createArrayBuffer(new Float32Array(t.vertices),T.gl.STATIC_DRAW),this.indexBuffer=this.createArrayBuffer(new Uint16Array(e.vertex_index),T.gl.STATIC_DRAW),this.lineIndexBuffer=this.createArrayBuffer(new Uint16Array(e.line_index),T.gl.STATIC_DRAW),this.lessLineIndexBuffer=this.createArrayBuffer(new Uint16Array(e.less_line_index),T.gl.STATIC_DRAW),this.lessLSIndexBuffer=this.createArrayBuffer(new Uint16Array(e.less_ls_index),T.gl.STATIC_DRAW)}},{key:"paint",value:function(){switch(T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.vertexBuffer),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,24,0),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,24,12),T.gl.uniformMatrix4fv(B.m_matrix,!1,this.mMatrix),T.gl.uniformMatrix4fv(B.pmv_matrix,!1,this.mvpMatrix),this.drawMode){case e.MODE_LINE:T.gl.uniform1f(B.alpha,this.line_alpha),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.lineIndexBuffer),T.gl.drawElements(T.gl.LINES,this.lineIndexBuffer.numItems,T.gl.UNSIGNED_SHORT,0);break;case e.MODE_LESSLINE:T.gl.uniform1f(B.alpha,this.line_alpha),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.lessLineIndexBuffer),T.gl.drawElements(T.gl.LINES,this.lessLineIndexBuffer.numItems,T.gl.UNSIGNED_SHORT,0),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.lessLSIndexBuffer),T.gl.drawElements(T.gl.TRIANGLES,this.lessLSIndexBuffer.numItems,T.gl.UNSIGNED_SHORT,0);break;case e.MODE_SURFACE:default:T.gl.uniform1f(B.alpha,this.alpha),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),T.gl.drawElements(T.gl.TRIANGLES,this.indexBuffer.numItems,T.gl.UNSIGNED_SHORT,0);break}}},{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"setSize",value:function(t){this.size=t*this.ratio,vec3.set(this.vscale,this.size,this.size,this.size),mat4.fromScaling(this.mMatrix,this.vscale),this.onViewChanged()}},{key:"setDrawMode",value:function(t){this.drawMode=t}},{key:"setAlpha",value:function(t){this.alpha=t}},{key:"getVertex",value:function(){var t,e,i,r=[],a=[];for(e=0;e<=this.vn;e++)for(t=0;t<=this.hn;t++)i=z(D(180*t/this.hn),D(360*e/this.vn),this.size),a=a.concat(i[0],i[1],i[2]);return a=a.concat([0,0,0]),r=U(a,this.color),{vertices:r}}},{key:"getIndex",value:function(){var t=[],e=[],i=[],r=[],a=0,n=0;for(n=0;n<this.vn;n++)for(a=0;a<this.hn+1;a++)e.push(a+n*(this.hn+1),a+1+n*(this.hn+1),a+n*(this.hn+1),a+(n+1)*(this.hn+1)),t.push(a+n*(this.hn+1),a+1+n*(this.hn+1),a+1+(n+1)*(this.hn+1)),t.push(a+n*(this.hn+1),a+1+(n+1)*(this.hn+1),a+(n+1)*(this.hn+1));for(a=0;a<this.hn+1;a++)n=0,i.push(a+n*(this.hn+1),a+1+n*(this.hn+1)),n=.25*this.vn,i.push(a+n*(this.hn+1),a+1+n*(this.hn+1)),n=.5*this.vn,i.push(a+n*(this.hn+1),a+1+n*(this.hn+1)),n=.75*this.vn,i.push(a+n*(this.hn+1),a+1+n*(this.hn+1));for(n=0;n<this.vn;n++)a=this.hn/2,i.push(a+n*(this.hn+1),a+(n+1)*(this.hn+1));for(n=.5*this.vn;n<.75*this.vn;n++)r.push((this.vn+1)*(this.hn+1)),r.push(.5*this.hn+n*(this.hn+1)),r.push(.5*this.hn+(n+1)*(this.hn+1)),r.push((this.vn+1)*(this.hn+1)),r.push(.5*this.hn+(n+1)*(this.hn+1)),r.push(.5*this.hn+n*(this.hn+1));return{vertex_index:t,line_index:e,less_line_index:i,less_ls_index:r}}}]),e}(k);Z.MODE_SURFACE=0,Z.MODE_LINE=1,Z.MODE_LESSLINE=2;var J,Q=function(t){function e(t){var i;Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.dis=t.dis||4,i.visible=!1;var r=[],a=[0,1,0],n=[0,0,1],s=0,h=0,o=0;for(r[o]=new K({pos:[0,0,i.dis],color:a,gl:T.gl}),o++,s=0;s<=2;s++)for(h=0;h<8;h++)r[o]=new K(1===s&&h%2===0?{pos:[45*(s+1),45*h,i.dis],color:a,gl:T.gl}:{pos:[45*(s+1),45*h,i.dis],color:n,gl:T.gl}),o++;return r[o]=new K({pos:[180,0,i.dis],color:a,gl:T.gl}),i.circles=r,i.setScale(t.size||1),i.init(),i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){var t=1,e=N(t,this.sides,0,2*Math.PI),i=U(e,this.color,e),r=0,a=[];for(r=1;r<this.sides+1;r++)a.push(r);this.vertexBuffer=this.createArrayBuffer(new Float32Array(i),T.gl.STATIC_DRAW),this.indexBuffer=this.createArrayBuffer(new Uint16Array(a),T.gl.STATIC_DRAW)}},{key:"paint",value:function(){if(this.visible){T.gl.uniform1f(B.alpha,this.alpha),T.gl.uniform1i(B.specColor,1),T.gl.bindBuffer(T.gl.ARRAY_BUFFER,this.vertexBuffer),T.gl.vertexAttribPointer(L.vertex_position,3,T.gl.FLOAT,!1,36,0),T.gl.vertexAttribPointer(L.vertex_normal,3,T.gl.FLOAT,!1,36,12),T.gl.vertexAttribPointer(L.color,3,T.gl.FLOAT,!1,36,24),T.gl.bindBuffer(T.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);for(var t=0;t<26;t++)T.gl.uniform3fv(B.vertexColor,this.circles[t].color),T.gl.uniformMatrix4fv(B.pmv_matrix,!1,this.circles[t].mvpMatrix),T.gl.drawElements(this.circles[t].drawMode,this.sides,T.gl.UNSIGNED_SHORT,0);T.gl.uniform1i(B.specColor,0)}}},{key:"onViewChanged",value:function(t){for(var e=0;e<26;e++)this.circles[e].onViewChanged(t)}},{key:"setDis",value:function(t){this.dis=t;for(var e=0;e<26;e++)this.circles[e].setTranslation(this.dis+.1)}},{key:"setScale",value:function(t){for(var e=0;e<26;e++)this.circles[e].setScale(t)}},{key:"onSphericalChanged",value:function(t){for(var e=0;e<26;e++)this.circles[e].isCurrent(t)}}]),e}(k),K=function(t){function e(t){var i;return Object(S["a"])(this,e),i=Object(F["a"])(this,Object(O["a"])(e).call(this,t)),i.type="RCircle",void 0!==t.pos&&(i.setTranslation(t.pos[2],D(t.pos[0]),D(t.pos[1])),i.setQuat(t.pos[0],t.pos[1])),i.current=!1,i.drawMode=T.gl.LINES,i}return Object(w["a"])(e,t),Object(P["a"])(e,[{key:"onViewChanged",value:function(t){this.pvMatrix=t||this.pvMatrix,mat4.fromRotationTranslationScale(this.mMatrix,this.quat,this.translation,this.vscale),mat4.mul(this.mvpMatrix,this.pvMatrix,this.mMatrix)}},{key:"setTranslation",value:function(t,e,i){void 0!==e&&(this.theta=e),void 0!==i&&(this.phi=i),this.translation=z(this.theta,this.phi,t),this.onViewChanged()}},{key:"setQuat",value:function(t,e,i){quat.fromEuler(this.quat,0,t,e),this.onViewChanged()}},{key:"setScale",value:function(t){this.size=t,this.vscale=vec3.fromValues(t,t,t),this.onViewChanged()}},{key:"isCurrent",value:function(t){if(Math.abs(t.theta-this.theta)<.02*Math.PI&&Math.abs(t.phi-this.phi)<.02*Math.PI){this.current=!0;var e=1.15*t.size;vec3.set(this.vscale,e,e,e),this.originColor=new Float32Array(this.color),this.color=[1,0,0],this.drawMode=T.gl.LINE_LOOP}else this.current&&(this.current=!1,vec3.set(this.vscale,this.size,this.size,this.size),this.color=this.originColor,this.drawMode=T.gl.LINES);this.onViewChanged()}}]),e}(k),tt="precision mediump float;\r\n\r\nattribute vec3 aVertexPosition;\r\nattribute vec3 aVertexNormal;\r\nattribute vec2 aTexture;\r\nattribute vec3 aColor;\r\n\r\nuniform mat4 uPMVMatrix;\r\nuniform mat4 uMMatrix;\r\nuniform mat4 uNMatrix;\r\nuniform vec3 uVertColor;\r\nuniform bool uSpecColor;\r\n\r\nuniform vec3  uLightDirection; // 直射光的方向\r\nvarying vec3  vLight;\r\nvarying vec2  vTexture;\r\nvarying vec3  vNormal;\r\nvarying vec3  vPosition;\r\n\r\n\r\nvoid main(void) {\r\n    gl_Position = uPMVMatrix * vec4(aVertexPosition, 1.0);\r\n\r\n    vec3 normal = normalize( vec3( uNMatrix * vec4( aVertexNormal, 1 ) ) );\r\n    vNormal = normal;\r\n    vPosition = vec3( uMMatrix * vec4( aVertexPosition , 1.0 ) );\r\n\r\n//    vec3 ambientLight     = vec3( 0.2, 0.24, 0.21 );\r\n//    vec3 directLightColor = vec3( 0.75, 0.75, 0.75 );\r\n//    float directional = max( dot( normal, normalize( uLightDirection ) ), 0.0);\r\n//    vec3 diffuse = directLightColor * directional;\r\n\r\n    if( !uSpecColor ) {\r\n//        vLight = aColor * (ambientLight + diffuse);\r\n        vLight = aColor;\r\n    } else {\r\n//        vLight = uVertColor * (ambientLight + diffuse);\r\n        vLight = uVertColor;\r\n    }\r\n    vTexture = aTexture;\r\n}\r\n",et="precision mediump float;\r\n\r\nvarying vec3  vLight;\r\nvarying vec2  vTexture;\r\nvarying vec3  vNormal;\r\nvarying vec3  vPosition;\r\n\r\nuniform float uAlpha;\r\nuniform vec3 uFragColor;\r\nuniform bool uHasTexture;\r\nuniform sampler2D uSampler;\r\n\r\n// uniform sampler2D uYSampler;\r\n// uniform sampler2D uZSampler;\r\n// uniform int uEnableTexture;\r\nvoid main(void) {\r\n    vec3 lightPos = vec3( 10, 10, 10 );\r\n    vec3 ambientLight = vec3( 0.28, 0.28, 0.28 );\r\n    vec3 directLightColor = vec3( 0.88, 0.88, 0.88 );\r\n    float directional = max( dot( normalize( vNormal ), normalize( lightPos - vPosition ) ), 0.0);        // 直接使用顶点的法线数据进行漫反射计算\r\n    vec3 diffuse = directLightColor * directional;\r\n\r\n    if( uHasTexture ) {\r\n//        vec4 color = mix( uFragColor, texture2D( uSampler, vec2( vTexture.s, vTexture.t ) ), 0.5 );\r\n        gl_FragColor = vec4( uFragColor * (diffuse + ambientLight), uAlpha );\r\n    }\r\n    else {\r\n        gl_FragColor = vec4( vLight * (diffuse + ambientLight), uAlpha );\r\n    }\r\n//   mediump vec4 xtextureColor = texture2D(uXSampler, vec2(vXTexture.s, vXTexture.t));\r\n//   mediump vec4 ytextureColor = texture2D(uYSampler, vec2(vXTexture.s, vXTexture.t));\r\n//   mediump vec4 ztextureColor = texture2D(uZSampler, vec2(vXTexture.s, vXTexture.t));\r\n//   if( uEnableTexture == 0 ) {\r\n//     gl_FragColor = vec4(vLight, uAlpha);\r\n//   }\r\n//   else if( uEnableTexture == 1 ) {\r\n//     gl_FragColor = vec4(vLight, 1.0) * xtextureColor;\r\n//   }\r\n//   else if( uEnableTexture == 2 ) {\r\n//     gl_FragColor = vec4(vLight, 1.0) * ytextureColor;}\r\n//   else if( uEnableTexture == 3 ) {\r\n//     gl_FragColor = vec4(vLight, 1.0) * ztextureColor;\r\n//   }\r\n}\r\n",it=function(){function t(e){Object(S["a"])(this,t),J=e.getContext("webgl",{depth:!0,antilias:!0}),T.gl=J;var i=new H({gl:J});this.scene=i,i.initShaders(tt,et),this.camera=new G({height:600,width:800}),i.addCamera(this.camera),this.coord=new Y({gl:J}),i.add(this.coord);var r=new W({gl:J,color:[1,.2,.1]});this.sensorPoint=r,i.add(r);var a=new $({gl:J});this.sensorPath=a,i.add(this.sensorPath),this.sphere=new Z({gl:J}),i.add(this.sphere);var n=new q({gl:J});this.recordPoint=n,i.add(this.recordPoint);var s=new Q({gl:J});this.refCircle=s,i.add(this.refCircle),r.addParamCallback(function(t){a.onSphericalChanged(t),n.onSphericalChanged(t),s.onSphericalChanged(t)}),i.render()}return Object(P["a"])(t,[{key:"reset",value:function(){sensorPoint.reset(),sensorPath.resetAllPath(),camera.reset()}},{key:"addRefCircle",value:function(t){void 0===refCircle&&(refCircle=new Q(t),sensorPoint.addParamCallback(function(t){refCircle.onSphericalChanged(t)}),sensorPoint.update(),scene.add(refCircle,!0))}},{key:"addCraft",value:function(t){void 0===craft&&(craft=new X(t),sensorPoint.addParamCallback(function(t){craft.setRotation(t)}),sensorPoint.update(),scene.add(craft,!0))}},{key:"initializeGL",value:function(t,e){J=t.getContext("canvas3d",{depth:!0,antilias:!0}),t.getContext("2d"),scene=new H,camera=new G,coordinate=new Y,sensorPoint=new W({color:[.9,.2,.15]}),sensorPoint.setScale(.1),sensorPath=new $({color:[.9,.5,.2],size:.3}),sensorPoint.addParamCallback(function(t){sensorPath.onSphericalChanged(t)}),recordPoint=new q,sensorPoint.addParamCallback(function(t){recordPoint.onSphericalChanged(t)}),sphere=new Ball({color:[.95,.2,.2],vn:48,hn:48}),sensorPoint.setParam({dis:4,pitch:0,roll:0,heading:0}),scene.add(coordinate),scene.add(sensorPoint),scene.add(sensorPath),scene.add(recordPoint),scene.add(sphere),scene.add(camera)}},{key:"paintGL",value:function(t){var e=t.devicePixelRatio,i=t.width*e,r=t.height*e;i===camera.width&&r===camera.height||camera.setSize(i,r),scene.render()}},{key:"resizeGL",value:function(t){var e=t.devicePixelRatio;t.pixelSize=Qt.size(t.width*e,t.height*e)}}]),t}();window.SpacePath=it;var rt={name:"app",components:{CSidebar:d,CInformation:b,CDebugPanel:C},data:function(){return{camera:{}}},created:function(){},mounted:function(){console.log("Mounted"),this.spacepath=new it(this.$refs.canvas),this.camera=this.spacepath.camera},methods:{debugValueChanged:function(t){"heading"==t.key?this.spacepath.sensorPoint.setParam({heading:h()(t.value)}):"pitch"==t.key?this.spacepath.sensorPoint.setParam({pitch:h()(t.value)}):"roll"==t.key&&this.spacepath.sensorPoint.setParam({roll:h()(t.value)})}}},at=rt,nt=(i("034f"),Object(f["a"])(at,a,n,!1,null,null,null)),st=nt.exports,ht=i("9f7b"),ot=i.n(ht);i("f9e3"),i("2dd8");r["a"].use(ot.a),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(st)}}).$mount("#app")},"64a9":function(t,e,i){}});
//# sourceMappingURL=index.411704d7.js.map